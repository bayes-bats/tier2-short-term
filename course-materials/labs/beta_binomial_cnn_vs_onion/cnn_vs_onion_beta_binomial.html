<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Laurie Baker">
<meta name="author" content="Jim Scott">
<meta name="dcterms.date" content="2024-10-07">

<title>CNN vs.&nbsp;The Onion - Beta Binomial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="cnn_vs_onion_beta_binomial_files/libs/clipboard/clipboard.min.js"></script>
<script src="cnn_vs_onion_beta_binomial_files/libs/quarto-html/quarto.js"></script>
<script src="cnn_vs_onion_beta_binomial_files/libs/quarto-html/popper.min.js"></script>
<script src="cnn_vs_onion_beta_binomial_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="cnn_vs_onion_beta_binomial_files/libs/quarto-html/anchor.min.js"></script>
<link href="cnn_vs_onion_beta_binomial_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="cnn_vs_onion_beta_binomial_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="cnn_vs_onion_beta_binomial_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="cnn_vs_onion_beta_binomial_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="cnn_vs_onion_beta_binomial_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="cnn_vs_onion_beta_binomial_files/libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="cnn_vs_onion_beta_binomial_files/libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<script type="module" src="cnn_vs_onion_beta_binomial_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="cnn_vs_onion_beta_binomial_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">CNN vs.&nbsp;The Onion - Beta Binomial</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Laurie Baker </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Bates College
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Jim Scott </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Colby College
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 7, 2024</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">May 28, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="activity-introduction" class="level2">
<h2 class="anchored" data-anchor-id="activity-introduction">Activity Introduction</h2>
<p>The goal of this activity is to explore how prior beliefs, what we think is likely before seeing any data, can influence the conclusions we draw after seeing new evidence: our posterior. To make things interesting, we will use a quiz where you’ll try to tell whether a headline came from CNN (a real news site) or The Onion (a fake, satirical news site).</p>
<p>Before taking the quiz, you’ll think about how many headlines you expect to guess correctly, and you’ll turn that guess into a <em>prior</em>, or starting point for your beliefs. Then, you’ll update your beliefs using data from actual quiz results and compare your updated beliefs, <em>posterior</em>, to those of other types of guessers: someone expecting to guess most answers correctly (optimistic), someone unsure whether they will guess many right or wrong (unsure), and someone expecting to guess most answers incorrectly (pessimistic) about how many answers they will get correct in the game.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p>By the end of the activity you’ll be able to:</p>
<ul>
<li><p>Understand what a prior and posterior are</p></li>
<li><p>See how beliefs change when we get new information</p></li>
<li><p>Make and interpret plots of different prior and posterior distributions</p></li>
</ul>
</div>
</div>
<!-- -   Calculate and compare summary statistics like the mean, mode, and standard deviation of these distributions. -->
<p>Let’s dive in and see how well we can guess the news from fiction and learn about Bayesian thinking along the way!</p>
</section>
<section id="cnn-vs-the-onion" class="level2">
<h2 class="anchored" data-anchor-id="cnn-vs-the-onion">CNN vs The Onion</h2>
<p>CNN (the Cable News Network) is widely considered a reputable news source. The Onion, on the other hand, is (according to Wikipedia) “an American news satire organization. It is an entertainment newspaper and a website featuring satirical articles reporting on international, national, and local news.” Another way of putting it - The Onion is “fake news” for entertainment purposes.</p>
<p>In this exercise you will assess your ability to determine real news stories published on <a href="cnn.com">cnn.com</a> from fake news stories published on <a href="theonion.com">theonion.com</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="the_onion.jpg" class="img-fluid figure-img" alt="Front page of Onion Newspaper: Headline reads Wikipedia Celebrates 750 Years of American Independence"></p>
<figcaption>Front page of the Onion. Photo: Casey Bisson, via Flickr</figcaption>
</figure>
</div>
</section>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bayesrules)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googledrive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Run this set up code to load the functions first
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div>
<div id="webr-1" class="exercise-cell">

</div>
<script type="webr-1-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic291cmNlKFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2FnbWF0aC9CYXllcy1CQVRTLXRpZXIyL3JlZnMvaGVhZHMvbWFpbi9iYXllc3J1bGVzZnVuY3Rpb25zLlJcIilcblxucHJpbnQoXCJJJ3ZlIG1hZGUgcGxvdF9iZXRhX2Jpbm9taWFsKCksIHN1bW1hcmlzZV9iZXRhX2Jpbm9taWFsKCksIGFuZCBwbG90X2JldGFfY2koKSBhdmFpbGFibGUgdG8geW91IVwiKSJ9
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-2" class="exercise-cell">

</div>
<script type="webr-2-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiXG5saWJyYXJ5KHRpZHl2ZXJzZSlcbmxpYnJhcnkoZ3JpZEV4dHJhKVxuXG4jJyBQbG90IGEgQmV0YS1CaW5vbWlhbCBCYXllc2lhbiBNb2RlbFxuIydcbiMnIENvbnNpZGVyIGEgQmV0YS1CaW5vbWlhbCBCYXllc2lhbiBtb2RlbCBmb3IgcGFyYW1ldGVyIFxcZXFue1xccGl9IHdpdGggXG4jJyBhIEJldGEoYWxwaGEsIGJldGEpIHByaW9yIG9uIFxcZXFue1xccGl9IGFuZCBCaW5vbWlhbCBsaWtlbGlob29kIHdpdGggbiB0cmlhbHNcbiMnIGFuZCB5IHN1Y2Nlc3Nlcy4gR2l2ZW4gaW5mb3JtYXRpb24gb24gdGhlIHByaW9yIChhbHBoYSBhbmQgZGF0YSkgYW5kIGRhdGEgKHkgYW5kIG4pLFxuIycgdGhpcyBmdW5jdGlvbiBwcm9kdWNlcyBhIHBsb3Qgb2YgYW55IGNvbWJpbmF0aW9uIG9mIHRoZSBjb3JyZXNwb25kaW5nIHByaW9yIHBkZiwgXG4jJyBzY2FsZWQgbGlrZWxpaG9vZCBmdW5jdGlvbiwgYW5kIHBvc3RlcmlvciBwZGYuICBBbGwgdGhyZWUgYXJlIGluY2x1ZGVkIGJ5IGRlZmF1bHQuXG4jJ1xuIycgQHBhcmFtIGFscGhhLGJldGEgcG9zaXRpdmUgc2hhcGUgcGFyYW1ldGVycyBvZiB0aGUgcHJpb3IgQmV0YSBtb2RlbFxuIycgQHBhcmFtIHkgb2JzZXJ2ZWQgbnVtYmVyIG9mIHN1Y2Nlc3Nlc1xuIycgQHBhcmFtIG4gb2JzZXJ2ZWQgbnVtYmVyIG9mIHRyaWFsc1xuIycgQHBhcmFtIHByaW9yIGEgbG9naWNhbCB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHByaW9yIG1vZGVsIHNob3VsZCBiZSBwbG90dGVkXG4jJyBAcGFyYW0gbGlrZWxpaG9vZCBhIGxvZ2ljYWwgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzY2FsZWQgbGlrZWxpaG9vZCBzaG91bGQgYmUgcGxvdHRlZFxuIycgQHBhcmFtIHBvc3RlcmlvciBhIGxvZ2ljYWwgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHBvc3RlcmlvciBtb2RlbCBzaG91bGQgYmUgcGxvdHRlZFxuIydcbiMnIEByZXR1cm4gYSBnZ3Bsb3RcbiMnIEBleHBvcnRcbiMnIEBpbXBvcnQgZ2dwbG90MlxuIycgQGltcG9ydEZyb20gc3RhdHMgZGJldGEgZGJpbm9tIGludGVncmF0ZVxuIycgQGV4YW1wbGVzXG4jJ1xuIycgcGxvdF9iZXRhX2Jpbm9taWFsKGFscGhhID0gMSwgYmV0YSA9IDEzLCB5ID0gMjUsIG4gPSA1MClcbiMnIHBsb3RfYmV0YV9iaW5vbWlhbChhbHBoYSA9IDEsIGJldGEgPSAxMywgeSA9IDI1LCBuID0gNTAsIHBvc3RlcmlvciA9IEZBTFNFKVxuIycgXG5wbG90X2JldGFfYmlub21pYWwgPC0gZnVuY3Rpb24gKGFscGhhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gTlVMTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IE5VTEwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yID0gVFJVRSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlrZWxpaG9vZCA9IFRSVUUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RlcmlvciA9IFRSVUUpe1xuICBpZiAoaXMubnVsbCh5KSB8IGlzLm51bGwobikpXG4gICAgd2FybmluZyhcIlRvIHZpc3VhbGl6ZSB0aGUgcG9zdGVyaW9yLFxuICAgICAgICAgICAgc3BlY2lmeSBkYXRhIHkgYW5kIG5cIilcblxuICBnIDwtIGdncGxvdChkYXRhID0gZGF0YS5mcmFtZSh4ID0gYygwLCAxKSksIGFlcyh4KSkgK1xuICAgIGxhYnMoeCA9IGV4cHJlc3Npb24ocGkpLFxuICAgICAgICAgeSA9IFwiZGVuc2l0eVwiKSArXG4gICAgc2NhbGVfZmlsbF9tYW51YWwoXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBjKHByaW9yID0gXCIjZjBlNDQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKHNjYWxlZCkgbGlrZWxpaG9vZGAgPSBcIiMwMDcxYjJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RlcmlvciA9IFwiIzAwOWU3NFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICBicmVha3MgPSBjKFwicHJpb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiKHNjYWxlZCkgbGlrZWxpaG9vZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwb3N0ZXJpb3JcIikpXG4gIFxuICBpZiAocHJpb3IgPT0gVFJVRSkge1xuICAgIGcgPC0gZyArXG4gICAgICBzdGF0X2Z1bmN0aW9uKGZ1biA9IGRiZXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IGxpc3Qoc2hhcGUxID0gYWxwaGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTIgPSBiZXRhKSkgK1xuICAgICAgc3RhdF9mdW5jdGlvbihmdW4gPSBkYmV0YSxcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IGxpc3Qoc2hhcGUxID0gYWxwaGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlMiA9IGJldGEpLFxuICAgICAgICAgICAgICAgICAgICBnZW9tID0gXCJhcmVhXCIsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhID0gMC41LFxuICAgICAgICAgICAgICAgICAgICBhZXMoZmlsbCA9IFwicHJpb3JcIikpXG4gICAgfVxuXG4gIGlmICghaXMubnVsbCh5KSAmICFpcy5udWxsKG4pKSB7XG4gICAgYWxwaGFfcG9zdCA8LSBhbHBoYSArIHlcbiAgICBiZXRhX3Bvc3QgPC0gYmV0YSArIG4gLSB5XG4gICAgeV9kYXRhIDwtIHlcbiAgICBsaWtlX3NjYWxlZCA8LSBmdW5jdGlvbih4KSB7XG4gICAgICBsaWtlX2Z1biA8LSBmdW5jdGlvbih4KSB7XG4gICAgICAgIGRiaW5vbSh4ID0geV9kYXRhLCBzaXplID0gbiwgcHJvYiA9IHgpXG4gICAgICB9XG4gICAgICBzY2FsZV9jIDwtIGludGVncmF0ZShsaWtlX2Z1biwgbG93ZXIgPSAwLCB1cHBlciA9IDEpW1sxXV1cbiAgICAgIGxpa2VfZnVuKHgpL3NjYWxlX2NcbiAgICB9XG4gIH1cbiAgaWYgKCFpcy5udWxsKHkpICYgIWlzLm51bGwobikgJiAobGlrZWxpaG9vZCAhPSBGQUxTRSkpIHtcbiAgICBnIDwtIGcgK1xuICAgICAgc3RhdF9mdW5jdGlvbihmdW4gPSBsaWtlX3NjYWxlZCkgK1xuICAgICAgc3RhdF9mdW5jdGlvbihmdW4gPSBsaWtlX3NjYWxlZCxcbiAgICAgICAgICAgICAgICAgICAgZ2VvbSA9IFwiYXJlYVwiLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYSA9IDAuNSxcbiAgICAgICAgICAgICAgICAgICAgYWVzKGZpbGwgPSBcIihzY2FsZWQpIGxpa2VsaWhvb2RcIikpXG4gIH1cbiAgaWYgKCFpcy5udWxsKHkpICYgIWlzLm51bGwobikgJiBwb3N0ZXJpb3IgPT0gVFJVRSkge1xuICAgIGcgPC0gZyArXG4gICAgICBzdGF0X2Z1bmN0aW9uKGZ1biA9IGRiZXRhLFxuICAgICAgICAgICAgICAgICAgICBhcmdzID0gbGlzdChzaGFwZTEgPSBhbHBoYV9wb3N0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTIgPSBiZXRhX3Bvc3QpKSArXG4gICAgICBzdGF0X2Z1bmN0aW9uKGZ1biA9IGRiZXRhLFxuICAgICAgICAgICAgICAgICAgICBhcmdzID0gbGlzdChzaGFwZTEgPSBhbHBoYV9wb3N0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTIgPSBiZXRhX3Bvc3QpLFxuICAgICAgICAgICAgICAgICAgICBnZW9tID0gXCJhcmVhXCIsIGFscGhhID0gMC41LFxuICAgICAgICAgICAgICAgICAgICBhZXMoZmlsbCA9IFwicG9zdGVyaW9yXCIpKVxuICB9XG4gIGdcbn0gIyBlbmQgb2YgZnVuY3Rpb25cblxuIycgQHRpdGxlIFBsb3QgYSBCZXRhIE1vZGVsIGZvciBcXGVxbntcXHBpfSBcbiMnXG4jJyBAZGVzY3JpcHRpb24gUGxvdHMgdGhlIHByb2JhYmlsaXR5IGRlbnNpdHkgZnVuY3Rpb24gKHBkZikgZm9yXG4jJyBhIEJldGEoYWxwaGEsIGJldGEpIG1vZGVsIG9mIHZhcmlhYmxlIFxcZXFue1xccGl9LlxuIydcbiMnIEBwYXJhbSBhbHBoYSxiZXRhIHBvc2l0aXZlIHNoYXBlIHBhcmFtZXRlcnMgb2YgdGhlIEJldGEgbW9kZWxcbiMnIEBwYXJhbSBtZWFuLG1vZGUgYSBsb2dpY2FsIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0byBkaXNwbGF5IHRoZSBtb2RlbCBtZWFuIGFuZCBtb2RlXG4jJ1xuIycgQHJldHVybiBBIGRlbnNpdHkgcGxvdCBmb3IgdGhlIEJldGEgbW9kZWwuXG4jJyBAZXhwb3J0XG4jJyBAaW1wb3J0IGdncGxvdDJcbiMnIEBpbXBvcnRGcm9tIHN0YXRzIGRiZXRhXG4jJ1xuIycgQGV4YW1wbGVzXG4jJyBwbG90X2JldGEoYWxwaGEgPSAxLCBiZXRhID0gMTIsIG1lYW4gPSBUUlVFLCBtb2RlID0gVFJVRSlcbnBsb3RfYmV0YSA8LSBmdW5jdGlvbihhbHBoYSwgYmV0YSwgbWVhbiA9IEZBTFNFLCBtb2RlID0gRkFMU0Upe1xuICBcbiAgXG4gIHAgPC0gZ2dwbG90KGRhdGEgPSBkYXRhLmZyYW1lKHggPSBjKDAsIDEpKSxcbiAgICAgICAgICAgICAgYWVzKHgpKSArXG4gICAgc3RhdF9mdW5jdGlvbihmdW4gPSBzdGF0czo6ZGJldGEsXG4gICAgICAgICAgICAgICAgICBuID0gMTAxLFxuICAgICAgICAgICAgICAgICAgYXJncyA9IGxpc3Qoc2hhcGUxID0gYWxwaGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTI9YmV0YSkpICtcbiAgICBsYWJzKHggPSBleHByZXNzaW9uKHBpKSxcbiAgICAgICAgIHkgPSBleHByZXNzaW9uKHBhc3RlKFwiZihcIixwaSxcIilcIikpKVxuXG4gIFxuICBpZiAobWVhbiA9PSBUUlVFICYgbW9kZSA9PSBGQUxTRSl7XG4gICAgbWVhbiA8LSBhbHBoYSAvIChhbHBoYSArIGJldGEpXG4gICAgXG4gICAgcCA8LSBwICtcbiAgICAgIGdlb21fc2VnbWVudChhZXMoeCA9IG1lYW4sIHkgPSAwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgeGVuZCA9IG1lYW4sIFxuICAgICAgICAgICAgICAgICAgICAgICB5ZW5kID0gZGJldGEobWVhbiwgYWxwaGEsIGJldGEpLFxuICAgICAgICAgICAgICAgICAgICAgICBsaW5ldHlwZSA9IFwibWVhblwiKSkgK1xuICAgICAgc2NhbGVfbGluZXR5cGVfbWFudWFsKHZhbHVlcyA9IGMobWVhbiA9IFwic29saWRcIikpICtcbiAgICAgIHRoZW1lKGxlZ2VuZC50aXRsZSA9IGVsZW1lbnRfYmxhbmsoKSlcbiAgfVxuICBcbiAgaWYgKG1lYW4gPT0gRkFMU0UgJiBtb2RlID09IFRSVUUpe1xuICAgIG1vZGUgPC0gKGFscGhhIC0gMSkvKGFscGhhICsgYmV0YSAtIDIpXG4gICAgXG4gICAgcCA8LSBwICtcbiAgICAgIGdlb21fc2VnbWVudChhZXMoeCA9IG1vZGUsIHkgPSAwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgeGVuZCA9IG1vZGUsIFxuICAgICAgICAgICAgICAgICAgICAgICB5ZW5kID0gZGJldGEobW9kZSwgYWxwaGEsIGJldGEpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgbGluZXR5cGUgPSBcIm1vZGVcIikpK1xuICAgICAgc2NhbGVfbGluZXR5cGVfbWFudWFsKHZhbHVlcyA9IGMobW9kZSA9IFwiZGFzaGVkXCIpKSArXG4gICAgICB0aGVtZShsZWdlbmQudGl0bGUgPSBlbGVtZW50X2JsYW5rKCkpXG4gICAgXG4gICAgXG4gIH1cbiAgXG4gIGlmIChtZWFuID09IFRSVUUgJiBtb2RlID09IFRSVUUpe1xuICAgIG1lYW4gPC0gYWxwaGEgLyAoYWxwaGEgKyBiZXRhKVxuICAgIG1vZGUgPC0gKGFscGhhIC0gMSkvKGFscGhhICsgYmV0YSAtIDIpXG4gICAgXG4gICAgXG4gICAgcCA8LSBwICtcbiAgICAgIGdlb21fc2VnbWVudChhZXMoeCA9IG1lYW4sIHkgPSAwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgeGVuZCA9IG1lYW4sIFxuICAgICAgICAgICAgICAgICAgICAgICB5ZW5kID0gZGJldGEobWVhbiwgYWxwaGEsIGJldGEpLFxuICAgICAgICAgICAgICAgICAgICAgICBsaW5ldHlwZSA9IFwibWVhblwiKSkgK1xuICAgICAgZ2VvbV9zZWdtZW50KGFlcyh4ID0gbW9kZSwgeSA9IDAsIFxuICAgICAgICAgICAgICAgICAgICAgICB4ZW5kID0gbW9kZSwgXG4gICAgICAgICAgICAgICAgICAgICAgIHllbmQgPSBzdGF0czo6ZGJldGEobW9kZSwgYWxwaGEsIGJldGEpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgbGluZXR5cGUgPSBcIm1vZGVcIikpK1xuICAgICAgc2NhbGVfbGluZXR5cGVfbWFudWFsKHZhbHVlcyA9IGMobWVhbiA9IFwic29saWRcIiwgbW9kZSA9IFwiZGFzaGVkXCIpKSArXG4gICAgICB0aGVtZShsZWdlbmQudGl0bGUgPSBlbGVtZW50X2JsYW5rKCkpXG4gIH1cbnBcbn1cblxuIycgQHRpdGxlIFN1bW1hcml6ZSBhIEJldGEtQmlub21pYWwgQmF5ZXNpYW4gbW9kZWxcbiMnIFxuIycgQGRlc2NyaXB0aW9uIENvbnNpZGVyIGEgQmV0YS1CaW5vbWlhbCBCYXllc2lhbiBtb2RlbCBmb3IgcGFyYW1ldGVyIFxcZXFue1xccGl9IHdpdGggXG4jJyBhIEJldGEoYWxwaGEsIGJldGEpIHByaW9yIG9uIFxcZXFue1xccGl9IGFuZCBCaW5vbWlhbCBsaWtlbGlob29kIHdpdGggbiB0cmlhbHNcbiMnIGFuZCB5IHN1Y2Nlc3Nlcy4gR2l2ZW4gaW5mb3JtYXRpb24gb24gdGhlIHByaW9yIChhbHBoYSBhbmQgZGF0YSkgYW5kIGRhdGEgKHkgYW5kIG4pLFxuIycgdGhpcyBmdW5jdGlvbiBzdW1tYXJpemVzIHRoZSBtZWFuLCBtb2RlLCBhbmQgdmFyaWFuY2Ugb2YgdGhlIFxuIycgcHJpb3IgYW5kIHBvc3RlcmlvciBCZXRhIG1vZGVscyBvZiBcXGVxbntcXHBpfS5cbiMnIFxuIycgQHBhcmFtIGFscGhhLGJldGEgcG9zaXRpdmUgc2hhcGUgcGFyYW1ldGVycyBvZiB0aGUgcHJpb3IgQmV0YSBtb2RlbFxuIycgQHBhcmFtIHkgbnVtYmVyIG9mIHN1Y2Nlc3Nlc1xuIycgQHBhcmFtIG4gbnVtYmVyIG9mIHRyaWFsc1xuIydcbiMnIEByZXR1cm4gYSBzdW1tYXJ5IHRhYmxlXG4jJyBAZXhwb3J0XG4jJ1xuIycgQGV4YW1wbGVzIFxuIycgc3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSAxLCBiZXRhID0gMTUsIHkgPSAyNSwgbiA9IDUwKVxuc3VtbWFyaXplX2JldGFfYmlub21pYWwgPC0gZnVuY3Rpb24gKGFscGhhLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXRhLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gTlVMTCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IE5VTEwpXG57XG4gIGlmIChpcy5udWxsKHkpIHwgaXMubnVsbChuKSlcbiAgICB3YXJuaW5nKFwiVG8gc3VtbWFyaXplIHRoZSBwb3N0ZXJpb3IsIFxuICAgICAgICAgICAgc3BlY2lmeSBkYXRhIHkgYW5kIG5cIilcbiAgYmV0YV9tZWFuIDwtIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICBhLyhhICsgYilcbiAgfVxuICBiZXRhX21vZGUgPC0gZnVuY3Rpb24oYSwgYikge1xuICAgIGlmKGEgPCAxICYgYiA8MSl7XG4gICAgICBtb2RlIDwtIFwiMCBhbmQgMVwiXG4gICAgfWVsc2UgaWYgKGEgPD0gMSAmIGIgPiAxKXtcbiAgICAgIG1vZGUgPC0gMFxuICAgIH1lbHNlIGlmIChhID4gMSAmIGIgPCAxKXtcbiAgICAgIG1vZGUgPC0gMVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgbW9kZSA8LSAoYSAtIDEpLyhhICsgYiAtIDIpXG4gICAgfVxuICB9XG4gIGJldGFfdmFyIDwtIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICBhICogYi8oKGEgKyBiKV4yICogKGEgKyBiICsgMSkpXG4gIH1cbiAgcHJpb3JfbWVhbiA8LSBiZXRhX21lYW4oYWxwaGEsIGJldGEpXG4gIHByaW9yX21vZGUgPC0gYmV0YV9tb2RlKGFscGhhLCBiZXRhKVxuICBwcmlvcl92YXIgPC0gYmV0YV92YXIoYWxwaGEsIGJldGEpXG4gIHByaW9yX3NkICA8LSBzcXJ0KHByaW9yX3ZhcilcbiAgaWYgKGlzLm51bGwoeSkgJiBpcy5udWxsKG4pKSB7XG4gICAgcmV0dXJuKGRhdGEuZnJhbWUobW9kZWwgPSBjKFwicHJpb3JcIiksIFxuICAgICAgICAgICAgICAgICAgICAgIGFscGhhID0gYWxwaGEsXG4gICAgICAgICAgICAgICAgICAgICAgYmV0YSA9IGJldGEsIFxuICAgICAgICAgICAgICAgICAgICAgIG1lYW4gPSBwcmlvcl9tZWFuLCBcbiAgICAgICAgICAgICAgICAgICAgICBtb2RlID0gcHJpb3JfbW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgPSBwcmlvcl92YXIsXG4gICAgICAgICAgICAgICAgICAgICAgc2QgPSBwcmlvcl9zZCkpXG4gIH1cbiAgZWxzZSB7XG4gICAgcG9zdF9hbHBoYSA8LSB5ICsgYWxwaGFcbiAgICBwb3N0X2JldGEgPC0gbiAtIHkgKyBiZXRhXG4gICAgcG9zdF9tZWFuIDwtIGJldGFfbWVhbihwb3N0X2FscGhhLCBwb3N0X2JldGEpXG4gICAgcG9zdF9tb2RlIDwtIGJldGFfbW9kZShwb3N0X2FscGhhLCBwb3N0X2JldGEpXG4gICAgcG9zdF92YXIgIDwtIGJldGFfdmFyKHBvc3RfYWxwaGEsIHBvc3RfYmV0YSlcbiAgICBwb3N0X3NkICAgPC0gc3FydChwb3N0X3ZhcilcbiAgICByZXR1cm4oZGF0YS5mcmFtZShtb2RlbCA9IGMoXCJwcmlvclwiLCBcInBvc3RlcmlvclwiKSwgXG4gICAgICAgICAgICAgICAgICAgICAgYWxwaGEgPSBjKGFscGhhLCBwb3N0X2FscGhhKSwgXG4gICAgICAgICAgICAgICAgICAgICAgYmV0YSA9IGMoYmV0YSwgcG9zdF9iZXRhKSwgXG4gICAgICAgICAgICAgICAgICAgICAgbWVhbiA9IGMocHJpb3JfbWVhbiwgcG9zdF9tZWFuKSwgXG4gICAgICAgICAgICAgICAgICAgICAgbW9kZSA9IGMocHJpb3JfbW9kZSwgcG9zdF9tb2RlKSwgXG4gICAgICAgICAgICAgICAgICAgICAgdmFyID0gYyhwcmlvcl92YXIsIHBvc3RfdmFyKSxcbiAgICAgICAgICAgICAgICAgICAgICBzZCA9IGMocHJpb3Jfc2QsIHBvc3Rfc2QpKSlcbiAgfVxufVxuXG5jbm5fb25pb24gPC0gZGF0YS5mcmFtZShzdHVkZW50ID0gcmVwKDE6MTAwLCBlYWNoID0gMTUpLCBxdWVzdGlvbiA9IHJlcCgxOjE1LCB0aW1lcyA9IDEwMCksIGNvcnJlY3QgPSByYmlub20obiA9IDE1KjEwMCwgc2l6ZSA9IDEsIHByb2IgPSAwLjY1KSwgeWVhciA9IHJlcCgyMDEwOjIwMjQsIGVhY2ggPSAxNSwgdGltZXMgPSAxMDApLCBpbnN0aXR1dGlvbiA9IHJlcChcIkNvbGJ5XCIsIHRpbWVzID0gMTUqMTAwKSkgIyBXZSB3aWxsIHJlcGxhY2UgdGhpcyB3aXRoIGFjdHVhbCBkYXRhIn0=
</script>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="priors" class="level2">
<h2 class="anchored" data-anchor-id="priors">Priors</h2>
<p>The CNN vs.&nbsp;The Onion quiz consists of 15 questions. Each question has the same possible answers: CNN or The Onion. Before we take the quiz, predict how many headlines you will guess correctly out of 15. You might think about your ability to determine fact from fiction or your familiarity with CNN and The Onion.</p>
<p>Let <span class="math inline">\(\pi\)</span> be the proportion of correct answers you guess right in the CNN vs the Onion quiz. Keeping that number in mind, let’s explore in the table below, three different priors from three different people <span class="math inline">\(\pi\)</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Optimistic</th>
<th>Unsure</th>
<th>Pessimistic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Beta(14, 1)</td>
<td>Beta(1, 1)</td>
<td>Beta(5, 10)</td>
</tr>
</tbody>
</table>
</section>
<section id="why-do-we-use-the-beta-distribution" class="level2">
<h2 class="anchored" data-anchor-id="why-do-we-use-the-beta-distribution">Why do we use the Beta distribution?</h2>
<p>The <strong>Beta distribution</strong> is commonly used as a prior for probabilities because it is defined on the interval <span class="math inline">\([0, 1]\)</span>, just like any probability.</p>
<p>Its two shape parameters <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> can be interpreted as representing <strong>prior pseudo-observations</strong>:</p>
<ul>
<li><span class="math inline">\(\alpha - 1\)</span>: prior successes</li>
<li><span class="math inline">\(\beta - 1\)</span>: prior failures</li>
</ul>
<p>This means a Beta<span class="math inline">\((\alpha, \beta)\)</span> distribution is like saying:</p>
<blockquote class="blockquote">
<p><em>Before seeing any new data, I’ve seen about</em> <span class="math inline">\(\alpha - 1\)</span> cases where this went right, and <span class="math inline">\(\beta - 1\)</span> where it didn’t.</p>
</blockquote>
<p>This interpretation helps ground priors in real-world expectations.</p>
<p>When you construct your own prior, you can use your guess for how many headlines you’ll get right as your “prior successes” and how many you’ll get wrong as your “prior failures”. For example, if you are pessimistic about the number you might get correct and think you’ll get 5 out of 15 correct, you might choose:</p>
<p><span class="math display">\[
\text{Beta}(5, 10)
\]</span></p>
<section id="plotting-the-priors" class="level3">
<h3 class="anchored" data-anchor-id="plotting-the-priors">Plotting the Priors</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="cnn_vs_onion_beta_binomial_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="1248"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="where-does-your-prediction-fall" class="level3">
<h3 class="anchored" data-anchor-id="where-does-your-prediction-fall">Where does your prediction fall?</h3>
<p>When we construct our priors from the Beta distribution, the shape parameters <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> can be interpreted as the approximate number of successes and the approximate number of failures. In constructing your prior, you can derive your alpha and beta parameters into how many questions out of 15 you expect to get correct: <code>Beta(approx_number_correct, approx_number_wrong)</code>.</p>
<p>Returning to your own prediction, replace <code>approx_number_correct</code> and <code>approx_number_wrong</code> with your predictions.</p>
<div>
<div id="webr-3" class="exercise-cell">

</div>
<script type="webr-3-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiXG5teV9wcmVkaWN0aW9uIDwtIHBsb3RfYmV0YShhbHBoYSA9IGFwcHJveF9udW1iZXJfY29ycmVjdCwgYmV0YSA9IGFwcHJveF9udW1iZXJfd3JvbmcpICtcbiAgbGFicyh0aXRsZSA9IFwiTXkgUHJlZGljdGlvblwiKVxuXG5teV9wcmVkaWN0aW9uIn0=
</script>
</div>
<p>Looking at the graph of your prior, which guesser is your prior most similar to: Optimistic, Unsure or Pessimistic?</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Vocabulary
</div>
</div>
<div class="callout-body-container callout-body">
<p>We often describe priors in terms of how much information they give about the unknown variable. Priors are often described as:</p>
<ul>
<li><p><strong>Informative prior:</strong> An informative prior reflects specific information about the unknown variable with high certainty (i.e.&nbsp;low variability).</p></li>
<li><p><strong>Vague (diffuse) prior:</strong> A vague or diffuse prior reflects little specific information about the unknown variable. A flat prior, which assigns equal prior plausibility to all possible values of the variable, is a special case.</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflection:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>How would you classify your prior? Is it informative or vague? Why?</li>
</ul>
</div>
</div>
</section>
</section>
<section id="activity" class="level2">
<h2 class="anchored" data-anchor-id="activity">Activity</h2>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<ul>
<li><p>Our data with the results from the quiz in a data frame called <code>cnn_onion</code>.</p></li>
<li><p>Based on the observed data, we will update the posterior for our three guessers and our own prior.</p></li>
<li><p>Next, we calculate the summary statistics for the prior and posterior for all four priors using the function <code>summarize_beta_binomial</code>:</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
summarize_beta_binomial
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><code>summarize_beta_binomial(alpha, beta, y = NULL, n = NULL)</code> function summarizes the mean, mode, and variance of the prior and posterior Beta models of <span class="math inline">\(\pi\)</span></p></li>
<li><p>Arguments:</p>
<ul>
<li><code>alpha, beta</code>: positive shape parameters of the prior Beta model</li>
<li><code>y</code>: number of successes</li>
<li><code>n</code>: number of trials</li>
</ul></li>
</ul>
</div>
</div>
<ul>
<li><p>Next, we plot the prior, likelihood, and the posterior for all four.</p></li>
<li><p>Lastly, we examine the effect of different priors on the posterior.</p></li>
</ul>
</section>
<section id="quiz-scores" class="level3">
<h3 class="anchored" data-anchor-id="quiz-scores">Quiz scores</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  student question correct year institution
1       1        1       1 2010       Colby
2       1        2       1 2010       Colby
3       1        3       1 2010       Colby
4       1        4       0 2010       Colby
5       1        5       1 2010       Colby
6       1        6       1 2010       Colby</code></pre>
</div>
</div>
<!-- Once we have more quiz results, we will read in the data from the google form. For now, we are working with simulated data. -->
<p>Let’s take a look at the student results from 2010.</p>
<div>
<div id="webr-4" class="exercise-cell">

</div>
<script type="webr-4-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiXG5jbm5fb25pb25fMjAxMCA8LSBjbm5fb25pb24gfD5cbiAgZmlsdGVyKHllYXIgPT0gMjAxMCxcbiAgICAgICAgIHN0dWRlbnQgJWluJSBjKDE6MTApKVxuXG5jb3VudChjbm5fb25pb25fMjAxMCwgY29ycmVjdCkifQ==
</script>
</div>
</section>
</section>
<section id="calculating-the-summary-statistics-and-plotting-the-distribution" class="level2">
<h2 class="anchored" data-anchor-id="calculating-the-summary-statistics-and-plotting-the-distribution">Calculating the summary statistics and plotting the distribution</h2>
<section id="the-optimist" class="level3">
<h3 class="anchored" data-anchor-id="the-optimist">The Optimist</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize_beta_binomial</span>(<span class="at">alpha =</span> <span class="dv">14</span>, <span class="at">beta =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">45</span>, <span class="at">n =</span> <span class="dv">150</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      model alpha beta      mean      mode         var         sd
1     prior    14    1 0.9333333 1.0000000 0.003888889 0.06236096
2 posterior    59  106 0.3575758 0.3558282 0.001383827 0.03719983</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_beta_binomial</span>(<span class="at">alpha =</span> <span class="dv">14</span>, <span class="at">beta =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">45</span>, <span class="at">n =</span> <span class="dv">150</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="cnn_vs_onion_beta_binomial_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="unsure" class="level3">
<h3 class="anchored" data-anchor-id="unsure">Unsure</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize_beta_binomial</span>(<span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">beta =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">45</span>, <span class="at">n =</span> <span class="dv">150</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      model alpha beta      mean mode         var         sd
1     prior     1    1 0.5000000  NaN 0.083333333 0.28867513
2 posterior    46  106 0.3026316  0.3 0.001379384 0.03714006</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_beta_binomial</span>(<span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">beta =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">45</span>, <span class="at">n =</span> <span class="dv">150</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="cnn_vs_onion_beta_binomial_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="the-pessimist" class="level3">
<h3 class="anchored" data-anchor-id="the-pessimist">The Pessimist</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize_beta_binomial</span>(<span class="at">alpha =</span> <span class="dv">4</span>, <span class="at">beta =</span> <span class="dv">11</span>, <span class="at">y =</span> <span class="dv">45</span>, <span class="at">n =</span> <span class="dv">150</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      model alpha beta      mean      mode         var         sd
1     prior     4   11 0.2666667 0.2307692 0.012222222 0.11055416
2 posterior    49  116 0.2969697 0.2944785 0.001257703 0.03546411</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_beta_binomial</span>(<span class="at">alpha =</span> <span class="dv">4</span>, <span class="at">beta =</span> <span class="dv">11</span>, <span class="at">y =</span> <span class="dv">45</span>, <span class="at">n =</span> <span class="dv">150</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="cnn_vs_onion_beta_binomial_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="very-optimistic" class="level3">
<h3 class="anchored" data-anchor-id="very-optimistic">Very Optimistic</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize_beta_binomial</span>(<span class="at">alpha =</span> <span class="dv">140</span>, <span class="at">beta =</span> <span class="dv">10</span>, <span class="at">y =</span> <span class="dv">45</span>, <span class="at">n =</span> <span class="dv">150</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      model alpha beta      mean      mode          var         sd
1     prior   140   10 0.9333333 0.9391892 0.0004120677 0.02029945
2 posterior   185  115 0.6166667 0.6174497 0.0007853451 0.02802401</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_beta_binomial</span>(<span class="at">alpha =</span> <span class="dv">140</span>, <span class="at">beta =</span> <span class="dv">10</span>, <span class="at">y =</span> <span class="dv">45</span>, <span class="at">n =</span> <span class="dv">150</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="cnn_vs_onion_beta_binomial_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="your-turn" class="level3">
<h3 class="anchored" data-anchor-id="your-turn">Your turn</h3>
<p>Fill in the alpha and beta shape parameters from your prior.</p>
<div>
<div id="webr-5" class="exercise-cell">

</div>
<script type="webr-5-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSBfX18sIGJldGEgPSBfX18sIHkgPSA0NSwgbiA9IDE1MCkifQ==
</script>
</div>
<div>
<div id="webr-6" class="exercise-cell">

</div>
<script type="webr-6-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoicGxvdF9iZXRhX2Jpbm9taWFsKGFscGhhID0gX19fLCBiZXRhID0gX19fLCB5ID0gNDUsIG4gPSAxNTApIn0=
</script>
</div>
</section>
</section>
<section id="comparison-of-the-priors" class="level2">
<h2 class="anchored" data-anchor-id="comparison-of-the-priors">Comparison of the priors</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="cnn_vs_onion_beta_binomial_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="1440"></p>
</figure>
</div>
</div>
</div>
<div>
<div id="webr-7" class="exercise-cell">

</div>
<script type="webr-7-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWUsImNvbnRleHQiOiJzZXR1cCJ9LCJjb2RlIjoib3B0aW1pc3QgPC0gcGxvdF9iZXRhX2Jpbm9taWFsKDE0LCAxLCB5ID0gNDUsIG4gPSAxNTApICtcbiAgbGFicyh0aXRsZSA9IFwiT3B0aW1pc3RpY1wiKVxuXG51bnN1cmUgPC0gcGxvdF9iZXRhX2Jpbm9taWFsKDEsIDEsIHkgPSA0NSwgbiA9IDE1MCkgK1xuICBsYWJzKHRpdGxlID0gXCJVbnN1cmVcIilcblxucGVzc2ltaXN0IDwtIHBsb3RfYmV0YV9iaW5vbWlhbCg0LCAxMSwgeSA9IDQ1LCBuID0gMTUwKSArXG4gIGxhYnModGl0bGUgPSBcIlBlc3NpbWlzdGljXCIpXG5cbnZlcnlfb3B0aW1pc3RpYyA8LSBwbG90X2JldGFfYmlub21pYWwoMTQwLCAxMCwgeSA9IDQ1LCBuID0gMTUwKSArXG4gIGxhYnModGl0bGUgPSBcIlZlcnkgT3B0aW1pc3RpY1wiKSJ9
</script>
</div>
<p>Fill in the gaps to add your alpha and beta shape parameters with your guess:</p>
<div>
<div id="webr-8" class="exercise-cell">

</div>
<script type="webr-8-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoibGlicmFyeShwYXRjaHdvcmspXG5cbnlvdXJfcGxvdCA8LSBwbG90X2JldGFfYmlub21pYWwoYWxwaGEgPSAsIGJldGEgPSAsIHkgPSA0NSwgbiA9IDE1MCkgK1xuICBsYWJzKHRpdGxlID0gXCJZb3VyIEd1ZXNzXCIpXG5cbmdyaWRFeHRyYTo6Z3JpZC5hcnJhbmdlKG9wdGltaXN0LCB1bnN1cmUsIHBlc3NpbWlzdCwgdmVyeV9vcHRpbWlzdGljLCB5b3VyX3Bsb3QsIG5jb2wgPSAyKSJ9
</script>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflection
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Inspecting the updated posteriors, how did the posteriors change or differ based on the respective priors?</p></li>
<li><p>What happened when you had a more informative prior, e.g.&nbsp;The Very Optimistic?</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Recap
</div>
</div>
<div class="callout-body-container callout-body">
<p>In this activity, you:</p>
<ul>
<li><p>Made a prediction about how well you’d do on a quiz and turned that into a prior distribution</p></li>
<li><p>Learned about different types of priors: confident, unsure, and pessimistic</p></li>
<li><p>Updated your prior using data from the quiz to get a posterior distribution</p></li>
<li><p>Compared how different priors affect the posterior, even when we see the same data</p></li>
<li><p>Practiced reading and interpreting plots of priors and posteriors</p></li>
</ul>
</div>
</div>
<!-- -   Calculated key summary statistics like the mean, mode, and standard deviation -->
<p>This exercise shows how Bayesian thinking helps us combine what we already believe with new evidence to make better, more informed decisions. And sometimes, it reminds us that even when we think we’re great at telling real news from fake news, the data might say otherwise!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflection
</div>
</div>
<div class="callout-body-container callout-body">
<p>Think about your prior prediction and how it compared to the data.</p>
<ul>
<li><p>How similar or different was your prior to the actual results?</p></li>
<li><p>Did updating your beliefs with data change your thinking? In what way?</p></li>
<li><p>If you had chosen a different prior (e.g., more vague or more confident), how would your posterior have changed?</p></li>
<li><p>What does this activity show about the role of prior knowledge or assumptions in data analysis?</p></li>
</ul>
<p>Take a few minutes to jot down your thoughts before share your ideas with a partner or group.</p>
</div>
</div>
</section>
<section id="take-the-quiz" class="level2">
<h2 class="anchored" data-anchor-id="take-the-quiz">Take the quiz</h2>
<p>Now that we’ve updated our posteriors, let’s take the quiz and add our data to the dataset of trials and successes.</p>
<p>Each of you will take a quiz consisting of 15 questions. Each question has the same possible answers: CNN or The Onion. You can take the quiz through our <a href="https://forms.gle/eVvFHZQwvtsBYa9r9">google form</a>:</p>
<iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeNADV2SfZbCNZRcwZ_2oaP1eBh8rgXKV_WKxXyQR-5QGEBlA/viewform?embedded=true" width="640" height="640" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>
<script type="webr-data">
eyJwYWNrYWdlcyI6eyJyZXBvcyI6W10sInBrZ3MiOlsiZXZhbHVhdGUiLCJrbml0ciIsImh0bWx0b29scyJdfSwib3B0aW9ucyI6eyJiYXNlVXJsIjoiaHR0cHM6Ly93ZWJyLnItd2FzbS5vcmcvdjAuNC4yLyJ9LCJyZW5kZXJfZGYiOiJkZWZhdWx0In0=
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV84O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC04IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0In0seyJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzggPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici04LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItOC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV84ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl84LCB7fSk7XG4iLCJjZWxsTmFtZSI6IndlYnItOCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQifSx7InNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfNztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtNyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCJ9LHsic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl83ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItNy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTctY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfNyA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfNywge30pO1xuIiwiY2VsbE5hbWUiOiJ3ZWJyLTciLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0In0seyJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzY7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTYiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNiA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTYtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici02LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzYgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzYsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici02IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV81O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC01IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0In0seyJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzUgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici01LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItNS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV81ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl81LCB7fSk7XG4iLCJjZWxsTmFtZSI6IndlYnItNSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQifSx7InNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfNDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtNCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCJ9LHsic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl80ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItNC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTQtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfNCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfNCwge30pO1xuIiwiY2VsbE5hbWUiOiJ3ZWJyLTQiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0In0seyJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzM7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTMiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifSx7InNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMyA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTMtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0zLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzMgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzMsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0zIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCJ9LHsic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yO1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0yIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0In0seyJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzIgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0yLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItMi1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8yID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yLCB7fSk7XG4iLCJjZWxsTmFtZSI6IndlYnItMiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQifSx7InNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCJ9LHsic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl8xID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTEtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfMSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMSwge30pO1xuIiwiY2VsbE5hbWUiOiJ3ZWJyLTEiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0In0seyJzb3VyY2UiOiJ3ZWJST2pzID0ge1xuICBjb25zdCB7IFdlYlIsIENoYW5uZWxUeXBlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lLldlYlI7XG4gIGNvbnN0IHtcbiAgICBXZWJSRXZhbHVhdG9yLFxuICAgIFdlYlJFbnZpcm9ubWVudE1hbmFnZXIsXG4gICAgc2V0dXBSLFxuICAgIGI2NERlY29kZSxcbiAgICBjb2xsYXBzZVBhdGhcbiAgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc3RhdHVzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleGVyY2lzZS1sb2FkaW5nLXN0YXR1c1wiKTtcbiAgY29uc3QgaW5kaWNhdG9yQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleGVyY2lzZS1sb2FkaW5nLWluZGljYXRvclwiKTtcbiAgaW5kaWNhdG9yQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJkLW5vbmVcIik7XG5cbiAgbGV0IHN0YXR1c1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gIHN0YXR1c1RleHQuY2xhc3NMaXN0ID0gXCJleGVyY2lzZS1sb2FkaW5nLWRldGFpbHNcIjtcbiAgc3RhdHVzVGV4dCA9IHN0YXR1c0NvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0dXNUZXh0KTtcbiAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBJbml0aWFsaXNlYDtcblxuICAvLyBIb2lzdCBpbmRpY2F0b3Igb3V0IGZyb20gZmluYWwgc2xpZGUgd2hlbiBydW5uaW5nIHVuZGVyIHJldmVhbFxuICBjb25zdCByZXZlYWxTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJldmVhbCAuZXhlcmNpc2UtbG9hZGluZy1pbmRpY2F0b3JcIik7XG4gIGlmIChyZXZlYWxTdGF0dXMpIHtcbiAgICByZXZlYWxTdGF0dXMucmVtb3ZlKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXZlYWwgPiAuc2xpZGVzXCIpLmFwcGVuZENoaWxkKHJldmVhbFN0YXR1cyk7XG4gIH1cblxuICAvLyBNYWtlIGFueSByZXZlYWwgc2xpZGVzIHdpdGggbGl2ZSBjZWxscyBzY3JvbGxhYmxlXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmV2ZWFsIC5leGVyY2lzZS1jZWxsXCIpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgZWwuY2xvc2VzdCgnc2VjdGlvbi5zbGlkZScpLmNsYXNzTGlzdC5hZGQoXCJzY3JvbGxhYmxlXCIpO1xuICB9KVxuXG4gIC8vIHdlYlIgc3VwcGxlbWVudGFsIGRhdGEgYW5kIG9wdGlvbnNcbiAgY29uc3QgZGF0YUNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici1kYXRhXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKGRhdGFDb250ZW50KSk7XG5cbiAgLy8gR3JhYiBsaXN0IG9mIHJlc291cmNlcyB0byBiZSBkb3dubG9hZGVkXG4gIGNvbnN0IGZpbGVzQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ2ZnMtZmlsZVxcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGZpbGVzID0gSlNPTi5wYXJzZShiNjREZWNvZGUoZmlsZXNDb250ZW50KSk7XG5cbiAgLy8gVXNlIFBvc3RNZXNzYWdlIGNoYW5uZWwgZm9yIGFzeW5jIGNvbW11bmljYXRpb25cbiAgLy8gV2UgZG8gbm90IGV4cGVjdCB0byB0YWtlIG5lc3RlZCBwcm9tcHQgaW5wdXQgaW4gUXVhcnRvIExpdmUgY2VsbHNcbiAgZGF0YS5vcHRpb25zLmNoYW5uZWxUeXBlID0gQ2hhbm5lbFR5cGUuUG9zdE1lc3NhZ2U7XG5cbiAgLy8gSW5pdGlhbGlzZSB3ZWJSIGFuZCBzZXR1cCBmb3IgUiBjb2RlIGV2YWx1YXRpb25cbiAgbGV0IHdlYlJQcm9taXNlID0gKGFzeW5jICh3ZWJSKSA9PiB7XG4gICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyB3ZWJSYDtcbiAgICBhd2FpdCB3ZWJSLmluaXQoKTtcblxuICAgIC8vIEluc3RhbGwgcHJvdmlkZWQgbGlzdCBvZiBwYWNrYWdlc1xuICAgIC8vIEVuc3VyZSB3ZWJSIGRlZmF1bHQgcmVwbyBpcyBpbmNsdWRlZFxuICAgIGRhdGEucGFja2FnZXMucmVwb3MucHVzaChcImh0dHBzOi8vcmVwby5yLXdhc20ub3JnXCIpXG4gICAgYXdhaXQgZGF0YS5wYWNrYWdlcy5wa2dzLm1hcCgocGtnKSA9PiAoKSA9PiB7XG4gICAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYERvd25sb2FkaW5nIHBhY2thZ2U6ICR7cGtnfWA7XG4gICAgICByZXR1cm4gd2ViUi5ldmFsUlZvaWQoYFxuICAgICAgICB3ZWJyOjppbnN0YWxsKHBrZywgcmVwb3MgPSByZXBvcylcbiAgICAgICAgbGlicmFyeShwa2csIGNoYXJhY3Rlci5vbmx5ID0gVFJVRSlcbiAgICAgIGAsIHsgZW52OiB7XG4gICAgICAgIHBrZzogcGtnLFxuICAgICAgICByZXBvczogZGF0YS5wYWNrYWdlcy5yZXBvcyxcbiAgICAgIH19KTtcbiAgICB9KS5yZWR1Y2UoKGN1ciwgbmV4dCkgPT4gY3VyLnRoZW4obmV4dCksIFByb21pc2UucmVzb2x2ZSgpKTtcblxuICAgIC8vIERvd25sb2FkIGFuZCBpbnN0YWxsIHJlc291cmNlc1xuICAgIGF3YWl0IGZpbGVzLm1hcCgoZmlsZSkgPT4gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IGZpbGUuc3Vic3RyaW5nKGZpbGUubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyByZXNvdXJjZTogJHtuYW1lfWA7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGZpbGUpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IGRvd25sb2FkIFxcYCR7ZmlsZX1cXGAuIEVycm9yICR7cmVzcG9uc2Uuc3RhdHVzfTogXCIke3Jlc3BvbnNlLnN0YXR1c1RleHR9XCIuYCk7XG4gICAgICB9XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcblxuICAgICAgLy8gU3RvcmUgVVJMcyBpbiB0aGUgY3dkIHdpdGhvdXQgYW55IHN1YmRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgIGlmIChmaWxlLmluY2x1ZGVzKFwiOi8vXCIpKSB7XG4gICAgICAgIGZpbGUgPSBuYW1lO1xuICAgICAgfVxuXG4gICAgICAvLyBDb2xsYXBzZSBoaWdoZXIgZGlyZWN0b3J5IHN0cnVjdHVyZVxuICAgICAgZmlsZSA9IGNvbGxhcHNlUGF0aChmaWxlKTtcblxuICAgICAgLy8gQ3JlYXRlIGRpcmVjdG9yeSB0cmVlLCBpZ25vcmluZyBcImRpcmVjdG9yeSBleGlzdHNcIiBWRlMgZXJyb3JzXG4gICAgICBjb25zdCBwYXJ0cyA9IGZpbGUuc3BsaXQoJy8nKS5zbGljZSgwLCAtMSk7XG4gICAgICBsZXQgcGF0aCA9ICcnO1xuICAgICAgd2hpbGUgKHBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGF0aCArPSBwYXJ0cy5zaGlmdCgpICsgJy8nO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHdlYlIuRlMubWtkaXIocGF0aCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpZiAoIWUubWVzc2FnZS5pbmNsdWRlcyhcIkZTIGVycm9yXCIpKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXcml0ZSB0aGlzIGZpbGUgdG8gdGhlIFZGU1xuICAgICAgcmV0dXJuIGF3YWl0IHdlYlIuRlMud3JpdGVGaWxlKGZpbGUsIG5ldyBVaW50OEFycmF5KGRhdGEpKTtcbiAgICB9KS5yZWR1Y2UoKGN1ciwgbmV4dCkgPT4gY3VyLnRoZW4obmV4dCksIFByb21pc2UucmVzb2x2ZSgpKTtcblxuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgSW5zdGFsbGluZyB3ZWJSIHNoaW1zYDtcbiAgICBhd2FpdCB3ZWJSLmV2YWxSVm9pZChgd2Vicjo6c2hpbV9pbnN0YWxsKClgKTtcblxuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgV2ViUiBlbnZpcm9ubWVudCBzZXR1cGA7XG4gICAgYXdhaXQgc2V0dXBSKHdlYlIsIGRhdGEpO1xuXG4gICAgc3RhdHVzVGV4dC5yZW1vdmUoKTtcbiAgICBpZiAoc3RhdHVzQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCA9PSAwKSB7XG4gICAgICBzdGF0dXNDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHdlYlI7XG4gIH0pKG5ldyBXZWJSKGRhdGEub3B0aW9ucykpO1xuXG4gIC8vIEtlZXAgdHJhY2sgb2YgaW5pdGlhbCBPSlMgYmxvY2sgcmVuZGVyXG4gIGNvbnN0IHJlbmRlcmVkT2pzID0ge307XG5cbiAgY29uc3QgcHJvY2VzcyA9IGFzeW5jIChjb250ZXh0LCBpbnB1dHMpID0+IHtcbiAgICBjb25zdCB3ZWJSID0gYXdhaXQgd2ViUlByb21pc2U7XG4gICAgY29uc3QgZXZhbHVhdG9yID0gbmV3IFdlYlJFdmFsdWF0b3Iod2ViUiwgY29udGV4dClcbiAgICBhd2FpdCBldmFsdWF0b3IucHJvY2VzcyhpbnB1dHMpO1xuICAgIHJldHVybiBldmFsdWF0b3IuY29udGFpbmVyO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9jZXNzLFxuICAgIHdlYlJQcm9taXNlLFxuICAgIHJlbmRlcmVkT2pzLFxuICB9O1xufVxuIiwiY2VsbE5hbWUiOiJ3ZWJyLXByZWx1ZGUiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQifV19
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script>
</section>

</main>
<!-- /main column -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../..";
window._ojs.paths.runtimeToRoot = "../../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>