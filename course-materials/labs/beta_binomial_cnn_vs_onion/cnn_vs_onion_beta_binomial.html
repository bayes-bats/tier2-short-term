<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Laurie Baker">
<meta name="author" content="Jim Scott">
<meta name="author" content="Mine Dogucu">
<meta name="dcterms.date" content="2024-10-07">

<title>CNN vs.&nbsp;The Onion - Beta Binomial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="cnn_vs_onion_beta_binomial_files/libs/clipboard/clipboard.min.js"></script>
<script src="cnn_vs_onion_beta_binomial_files/libs/quarto-html/quarto.js"></script>
<script src="cnn_vs_onion_beta_binomial_files/libs/quarto-html/popper.min.js"></script>
<script src="cnn_vs_onion_beta_binomial_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="cnn_vs_onion_beta_binomial_files/libs/quarto-html/anchor.min.js"></script>
<link href="cnn_vs_onion_beta_binomial_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="cnn_vs_onion_beta_binomial_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="cnn_vs_onion_beta_binomial_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="cnn_vs_onion_beta_binomial_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="cnn_vs_onion_beta_binomial_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="cnn_vs_onion_beta_binomial_files/libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="cnn_vs_onion_beta_binomial_files/libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<script type="module" src="cnn_vs_onion_beta_binomial_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="cnn_vs_onion_beta_binomial_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">CNN vs.&nbsp;The Onion - Beta Binomial</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Laurie Baker </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Bates College
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Jim Scott </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Colby College
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Mine Dogucu </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            UC Irvine
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 7, 2024</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">July 22, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="activity-introduction" class="level2">
<h2 class="anchored" data-anchor-id="activity-introduction">Activity Introduction</h2>
<p>The goal of this activity is to explore how prior beliefs, what we think is probable before seeing any data, can influence the conclusions we draw after seeing new evidence: our posterior beliefs. To make things interesting, we will use a quiz where you’ll try to tell whether a headline came from CNN (a real news site) or The Onion (a fake, satirical news site).</p>
<p>Before taking the quiz, you’ll think about how many headlines you expect a person might guess correctly, and you’ll turn that guess into a <em>prior model</em>, or starting point for your beliefs. Then, you’ll update your beliefs using data from actual quiz results and arrive at a <em>posterior model</em>. You will compare three different prior models representing other beliefs: someone expecting a person to guess most answers correctly (optimistic), someone undecided (no prior knowledge) about whether a person will guess many right or wrong (undecided), and someone expecting to guess most answers incorrectly (pessimistic) about how many answers they will get correct in the game.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p>By the end of the activity you’ll be able to:</p>
<ul>
<li><p>Construct prior and posterior models</p></li>
<li><p>See how models update when we get new information</p></li>
<li><p>Make and interpret plots of different prior and posterior models</p></li>
<li><p>Calculate and compare summary statistics like the mean, mode, and standard deviation of these models.</p></li>
</ul>
</div>
</div>
<p>Let’s dive in and see how well we can guess the news from fiction and learn about Bayesian thinking along the way!</p>
</section>
<section id="cnn-vs-the-onion" class="level2">
<h2 class="anchored" data-anchor-id="cnn-vs-the-onion">CNN vs The Onion</h2>
<p>CNN (the Cable News Network) is widely considered a reputable news source. The Onion, on the other hand, is (according to Wikipedia) “an American news satire organization. It is an entertainment newspaper and a website featuring satirical articles reporting on international, national, and local news.” Another way of putting it - The Onion is “fake news” for entertainment purposes.</p>
<p>In this exercise you will assess people’s ability to determine real news stories published on <a href="cnn.com">cnn.com</a> from fake news stories published on <a href="theonion.com">theonion.com</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="the_onion.jpg" class="img-fluid figure-img" alt="Front page of Onion Newspaper: Headline reads Wikipedia Celebrates 750 Years of American Independence"></p>
<figcaption>Frontpage of the Onion. Photo: Casey Bisson, via Flickr</figcaption>
</figure>
</div>
</section>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bayesrules)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="code-set-up" class="level1">
<h1>Code Set Up</h1>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Run this set up code to load the functions from the <code>bayesrules</code> package first. There is no need to understand this code.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The package Bayes Rule is not available in the webr server at this time, so we will include the functions here.</p>
<!-- ```{webr setup-adam} -->
<!-- source("https://raw.githubusercontent.com/agmath/Bayes-BATS-tier2/refs/heads/main/bayesrulesfunctions.R") -->
<!-- print("I've made plot_beta_binomial(), summarise_beta_binomial(), and plot_beta_ci() available to you!") -->
<!-- ``` -->
<div class="cell">
<div>
<div id="webr-1" class="exercise-cell">

</div>
<script type="webr-1-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiXG5saWJyYXJ5KHRpZHl2ZXJzZSlcbmxpYnJhcnkoZ3JpZEV4dHJhKVxuXG4jJyBQbG90IGEgQmV0YS1CaW5vbWlhbCBCYXllc2lhbiBNb2RlbFxuIydcbiMnIENvbnNpZGVyIGEgQmV0YS1CaW5vbWlhbCBCYXllc2lhbiBtb2RlbCBmb3IgcGFyYW1ldGVyIFxcZXFue1xccGl9IHdpdGggXG4jJyBhIEJldGEoYWxwaGEsIGJldGEpIHByaW9yIG9uIFxcZXFue1xccGl9IGFuZCBCaW5vbWlhbCBsaWtlbGlob29kIHdpdGggbiB0cmlhbHNcbiMnIGFuZCB5IHN1Y2Nlc3Nlcy4gR2l2ZW4gaW5mb3JtYXRpb24gb24gdGhlIHByaW9yIChhbHBoYSBhbmQgZGF0YSkgYW5kIGRhdGEgKHkgYW5kIG4pLFxuIycgdGhpcyBmdW5jdGlvbiBwcm9kdWNlcyBhIHBsb3Qgb2YgYW55IGNvbWJpbmF0aW9uIG9mIHRoZSBjb3JyZXNwb25kaW5nIHByaW9yIHBkZiwgXG4jJyBzY2FsZWQgbGlrZWxpaG9vZCBmdW5jdGlvbiwgYW5kIHBvc3RlcmlvciBwZGYuICBBbGwgdGhyZWUgYXJlIGluY2x1ZGVkIGJ5IGRlZmF1bHQuXG4jJ1xuIycgQHBhcmFtIGFscGhhLGJldGEgcG9zaXRpdmUgc2hhcGUgcGFyYW1ldGVycyBvZiB0aGUgcHJpb3IgQmV0YSBtb2RlbFxuIycgQHBhcmFtIHkgb2JzZXJ2ZWQgbnVtYmVyIG9mIHN1Y2Nlc3Nlc1xuIycgQHBhcmFtIG4gb2JzZXJ2ZWQgbnVtYmVyIG9mIHRyaWFsc1xuIycgQHBhcmFtIHByaW9yIGEgbG9naWNhbCB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHByaW9yIG1vZGVsIHNob3VsZCBiZSBwbG90dGVkXG4jJyBAcGFyYW0gbGlrZWxpaG9vZCBhIGxvZ2ljYWwgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzY2FsZWQgbGlrZWxpaG9vZCBzaG91bGQgYmUgcGxvdHRlZFxuIycgQHBhcmFtIHBvc3RlcmlvciBhIGxvZ2ljYWwgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHBvc3RlcmlvciBtb2RlbCBzaG91bGQgYmUgcGxvdHRlZFxuIydcbiMnIEByZXR1cm4gYSBnZ3Bsb3RcbiMnIEBleHBvcnRcbiMnIEBpbXBvcnQgZ2dwbG90MlxuIycgQGltcG9ydEZyb20gc3RhdHMgZGJldGEgZGJpbm9tIGludGVncmF0ZVxuIycgQGV4YW1wbGVzXG4jJ1xuIycgcGxvdF9iZXRhX2Jpbm9taWFsKGFscGhhID0gMSwgYmV0YSA9IDEzLCB5ID0gMjUsIG4gPSA1MClcbiMnIHBsb3RfYmV0YV9iaW5vbWlhbChhbHBoYSA9IDEsIGJldGEgPSAxMywgeSA9IDI1LCBuID0gNTAsIHBvc3RlcmlvciA9IEZBTFNFKVxuIycgXG5wbG90X2JldGFfYmlub21pYWwgPC0gZnVuY3Rpb24gKGFscGhhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gTlVMTCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IE5VTEwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yID0gVFJVRSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlrZWxpaG9vZCA9IFRSVUUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RlcmlvciA9IFRSVUUpe1xuICBpZiAoaXMubnVsbCh5KSB8IGlzLm51bGwobikpXG4gICAgd2FybmluZyhcIlRvIHZpc3VhbGl6ZSB0aGUgcG9zdGVyaW9yLFxuICAgICAgICAgICAgc3BlY2lmeSBkYXRhIHkgYW5kIG5cIilcblxuICBnIDwtIGdncGxvdChkYXRhID0gZGF0YS5mcmFtZSh4ID0gYygwLCAxKSksIGFlcyh4KSkgK1xuICAgIGxhYnMoeCA9IGV4cHJlc3Npb24ocGkpLFxuICAgICAgICAgeSA9IFwiZGVuc2l0eVwiKSArXG4gICAgc2NhbGVfZmlsbF9tYW51YWwoXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBjKHByaW9yID0gXCIjZjBlNDQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKHNjYWxlZCkgbGlrZWxpaG9vZGAgPSBcIiMwMDcxYjJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RlcmlvciA9IFwiIzAwOWU3NFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICBicmVha3MgPSBjKFwicHJpb3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiKHNjYWxlZCkgbGlrZWxpaG9vZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwb3N0ZXJpb3JcIikpXG4gIFxuICBpZiAocHJpb3IgPT0gVFJVRSkge1xuICAgIGcgPC0gZyArXG4gICAgICBzdGF0X2Z1bmN0aW9uKGZ1biA9IGRiZXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IGxpc3Qoc2hhcGUxID0gYWxwaGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTIgPSBiZXRhKSkgK1xuICAgICAgc3RhdF9mdW5jdGlvbihmdW4gPSBkYmV0YSxcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IGxpc3Qoc2hhcGUxID0gYWxwaGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlMiA9IGJldGEpLFxuICAgICAgICAgICAgICAgICAgICBnZW9tID0gXCJhcmVhXCIsXG4gICAgICAgICAgICAgICAgICAgIGFscGhhID0gMC41LFxuICAgICAgICAgICAgICAgICAgICBhZXMoZmlsbCA9IFwicHJpb3JcIikpXG4gICAgfVxuXG4gIGlmICghaXMubnVsbCh5KSAmICFpcy5udWxsKG4pKSB7XG4gICAgYWxwaGFfcG9zdCA8LSBhbHBoYSArIHlcbiAgICBiZXRhX3Bvc3QgPC0gYmV0YSArIG4gLSB5XG4gICAgeV9kYXRhIDwtIHlcbiAgICBsaWtlX3NjYWxlZCA8LSBmdW5jdGlvbih4KSB7XG4gICAgICBsaWtlX2Z1biA8LSBmdW5jdGlvbih4KSB7XG4gICAgICAgIGRiaW5vbSh4ID0geV9kYXRhLCBzaXplID0gbiwgcHJvYiA9IHgpXG4gICAgICB9XG4gICAgICBzY2FsZV9jIDwtIGludGVncmF0ZShsaWtlX2Z1biwgbG93ZXIgPSAwLCB1cHBlciA9IDEpW1sxXV1cbiAgICAgIGxpa2VfZnVuKHgpL3NjYWxlX2NcbiAgICB9XG4gIH1cbiAgaWYgKCFpcy5udWxsKHkpICYgIWlzLm51bGwobikgJiAobGlrZWxpaG9vZCAhPSBGQUxTRSkpIHtcbiAgICBnIDwtIGcgK1xuICAgICAgc3RhdF9mdW5jdGlvbihmdW4gPSBsaWtlX3NjYWxlZCkgK1xuICAgICAgc3RhdF9mdW5jdGlvbihmdW4gPSBsaWtlX3NjYWxlZCxcbiAgICAgICAgICAgICAgICAgICAgZ2VvbSA9IFwiYXJlYVwiLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYSA9IDAuNSxcbiAgICAgICAgICAgICAgICAgICAgYWVzKGZpbGwgPSBcIihzY2FsZWQpIGxpa2VsaWhvb2RcIikpXG4gIH1cbiAgaWYgKCFpcy5udWxsKHkpICYgIWlzLm51bGwobikgJiBwb3N0ZXJpb3IgPT0gVFJVRSkge1xuICAgIGcgPC0gZyArXG4gICAgICBzdGF0X2Z1bmN0aW9uKGZ1biA9IGRiZXRhLFxuICAgICAgICAgICAgICAgICAgICBhcmdzID0gbGlzdChzaGFwZTEgPSBhbHBoYV9wb3N0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTIgPSBiZXRhX3Bvc3QpKSArXG4gICAgICBzdGF0X2Z1bmN0aW9uKGZ1biA9IGRiZXRhLFxuICAgICAgICAgICAgICAgICAgICBhcmdzID0gbGlzdChzaGFwZTEgPSBhbHBoYV9wb3N0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTIgPSBiZXRhX3Bvc3QpLFxuICAgICAgICAgICAgICAgICAgICBnZW9tID0gXCJhcmVhXCIsIGFscGhhID0gMC41LFxuICAgICAgICAgICAgICAgICAgICBhZXMoZmlsbCA9IFwicG9zdGVyaW9yXCIpKVxuICB9XG4gIGdcbn0gIyBlbmQgb2YgZnVuY3Rpb25cblxuIycgQHRpdGxlIFBsb3QgYSBCZXRhIE1vZGVsIGZvciBcXGVxbntcXHBpfSBcbiMnXG4jJyBAZGVzY3JpcHRpb24gUGxvdHMgdGhlIHByb2JhYmlsaXR5IGRlbnNpdHkgZnVuY3Rpb24gKHBkZikgZm9yXG4jJyBhIEJldGEoYWxwaGEsIGJldGEpIG1vZGVsIG9mIHZhcmlhYmxlIFxcZXFue1xccGl9LlxuIydcbiMnIEBwYXJhbSBhbHBoYSxiZXRhIHBvc2l0aXZlIHNoYXBlIHBhcmFtZXRlcnMgb2YgdGhlIEJldGEgbW9kZWxcbiMnIEBwYXJhbSBtZWFuLG1vZGUgYSBsb2dpY2FsIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0byBkaXNwbGF5IHRoZSBtb2RlbCBtZWFuIGFuZCBtb2RlXG4jJ1xuIycgQHJldHVybiBBIGRlbnNpdHkgcGxvdCBmb3IgdGhlIEJldGEgbW9kZWwuXG4jJyBAZXhwb3J0XG4jJyBAaW1wb3J0IGdncGxvdDJcbiMnIEBpbXBvcnRGcm9tIHN0YXRzIGRiZXRhXG4jJ1xuIycgQGV4YW1wbGVzXG4jJyBwbG90X2JldGEoYWxwaGEgPSAxLCBiZXRhID0gMTIsIG1lYW4gPSBUUlVFLCBtb2RlID0gVFJVRSlcbnBsb3RfYmV0YSA8LSBmdW5jdGlvbihhbHBoYSwgYmV0YSwgbWVhbiA9IEZBTFNFLCBtb2RlID0gRkFMU0Upe1xuICBcbiAgXG4gIHAgPC0gZ2dwbG90KGRhdGEgPSBkYXRhLmZyYW1lKHggPSBjKDAsIDEpKSxcbiAgICAgICAgICAgICAgYWVzKHgpKSArXG4gICAgc3RhdF9mdW5jdGlvbihmdW4gPSBzdGF0czo6ZGJldGEsXG4gICAgICAgICAgICAgICAgICBuID0gMTAxLFxuICAgICAgICAgICAgICAgICAgYXJncyA9IGxpc3Qoc2hhcGUxID0gYWxwaGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTI9YmV0YSkpICtcbiAgICBsYWJzKHggPSBleHByZXNzaW9uKHBpKSxcbiAgICAgICAgIHkgPSBleHByZXNzaW9uKHBhc3RlKFwiZihcIixwaSxcIilcIikpKVxuXG4gIFxuICBpZiAobWVhbiA9PSBUUlVFICYgbW9kZSA9PSBGQUxTRSl7XG4gICAgbWVhbiA8LSBhbHBoYSAvIChhbHBoYSArIGJldGEpXG4gICAgXG4gICAgcCA8LSBwICtcbiAgICAgIGdlb21fc2VnbWVudChhZXMoeCA9IG1lYW4sIHkgPSAwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgeGVuZCA9IG1lYW4sIFxuICAgICAgICAgICAgICAgICAgICAgICB5ZW5kID0gZGJldGEobWVhbiwgYWxwaGEsIGJldGEpLFxuICAgICAgICAgICAgICAgICAgICAgICBsaW5ldHlwZSA9IFwibWVhblwiKSkgK1xuICAgICAgc2NhbGVfbGluZXR5cGVfbWFudWFsKHZhbHVlcyA9IGMobWVhbiA9IFwic29saWRcIikpICtcbiAgICAgIHRoZW1lKGxlZ2VuZC50aXRsZSA9IGVsZW1lbnRfYmxhbmsoKSlcbiAgfVxuICBcbiAgaWYgKG1lYW4gPT0gRkFMU0UgJiBtb2RlID09IFRSVUUpe1xuICAgIG1vZGUgPC0gKGFscGhhIC0gMSkvKGFscGhhICsgYmV0YSAtIDIpXG4gICAgXG4gICAgcCA8LSBwICtcbiAgICAgIGdlb21fc2VnbWVudChhZXMoeCA9IG1vZGUsIHkgPSAwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgeGVuZCA9IG1vZGUsIFxuICAgICAgICAgICAgICAgICAgICAgICB5ZW5kID0gZGJldGEobW9kZSwgYWxwaGEsIGJldGEpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgbGluZXR5cGUgPSBcIm1vZGVcIikpK1xuICAgICAgc2NhbGVfbGluZXR5cGVfbWFudWFsKHZhbHVlcyA9IGMobW9kZSA9IFwiZGFzaGVkXCIpKSArXG4gICAgICB0aGVtZShsZWdlbmQudGl0bGUgPSBlbGVtZW50X2JsYW5rKCkpXG4gICAgXG4gICAgXG4gIH1cbiAgXG4gIGlmIChtZWFuID09IFRSVUUgJiBtb2RlID09IFRSVUUpe1xuICAgIG1lYW4gPC0gYWxwaGEgLyAoYWxwaGEgKyBiZXRhKVxuICAgIG1vZGUgPC0gKGFscGhhIC0gMSkvKGFscGhhICsgYmV0YSAtIDIpXG4gICAgXG4gICAgXG4gICAgcCA8LSBwICtcbiAgICAgIGdlb21fc2VnbWVudChhZXMoeCA9IG1lYW4sIHkgPSAwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgeGVuZCA9IG1lYW4sIFxuICAgICAgICAgICAgICAgICAgICAgICB5ZW5kID0gZGJldGEobWVhbiwgYWxwaGEsIGJldGEpLFxuICAgICAgICAgICAgICAgICAgICAgICBsaW5ldHlwZSA9IFwibWVhblwiKSkgK1xuICAgICAgZ2VvbV9zZWdtZW50KGFlcyh4ID0gbW9kZSwgeSA9IDAsIFxuICAgICAgICAgICAgICAgICAgICAgICB4ZW5kID0gbW9kZSwgXG4gICAgICAgICAgICAgICAgICAgICAgIHllbmQgPSBzdGF0czo6ZGJldGEobW9kZSwgYWxwaGEsIGJldGEpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgbGluZXR5cGUgPSBcIm1vZGVcIikpK1xuICAgICAgc2NhbGVfbGluZXR5cGVfbWFudWFsKHZhbHVlcyA9IGMobWVhbiA9IFwic29saWRcIiwgbW9kZSA9IFwiZGFzaGVkXCIpKSArXG4gICAgICB0aGVtZShsZWdlbmQudGl0bGUgPSBlbGVtZW50X2JsYW5rKCkpXG4gIH1cbnBcbn1cblxuIycgQHRpdGxlIFN1bW1hcml6ZSBhIEJldGEtQmlub21pYWwgQmF5ZXNpYW4gbW9kZWxcbiMnIFxuIycgQGRlc2NyaXB0aW9uIENvbnNpZGVyIGEgQmV0YS1CaW5vbWlhbCBCYXllc2lhbiBtb2RlbCBmb3IgcGFyYW1ldGVyIFxcZXFue1xccGl9IHdpdGggXG4jJyBhIEJldGEoYWxwaGEsIGJldGEpIHByaW9yIG9uIFxcZXFue1xccGl9IGFuZCBCaW5vbWlhbCBsaWtlbGlob29kIHdpdGggbiB0cmlhbHNcbiMnIGFuZCB5IHN1Y2Nlc3Nlcy4gR2l2ZW4gaW5mb3JtYXRpb24gb24gdGhlIHByaW9yIChhbHBoYSBhbmQgZGF0YSkgYW5kIGRhdGEgKHkgYW5kIG4pLFxuIycgdGhpcyBmdW5jdGlvbiBzdW1tYXJpemVzIHRoZSBtZWFuLCBtb2RlLCBhbmQgdmFyaWFuY2Ugb2YgdGhlIFxuIycgcHJpb3IgYW5kIHBvc3RlcmlvciBCZXRhIG1vZGVscyBvZiBcXGVxbntcXHBpfS5cbiMnIFxuIycgQHBhcmFtIGFscGhhLGJldGEgcG9zaXRpdmUgc2hhcGUgcGFyYW1ldGVycyBvZiB0aGUgcHJpb3IgQmV0YSBtb2RlbFxuIycgQHBhcmFtIHkgbnVtYmVyIG9mIHN1Y2Nlc3Nlc1xuIycgQHBhcmFtIG4gbnVtYmVyIG9mIHRyaWFsc1xuIydcbiMnIEByZXR1cm4gYSBzdW1tYXJ5IHRhYmxlXG4jJyBAZXhwb3J0XG4jJ1xuIycgQGV4YW1wbGVzIFxuIycgc3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSAxLCBiZXRhID0gMTUsIHkgPSAyNSwgbiA9IDUwKVxuc3VtbWFyaXplX2JldGFfYmlub21pYWwgPC0gZnVuY3Rpb24gKGFscGhhLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXRhLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gTlVMTCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IE5VTEwpXG57XG4gIGlmIChpcy5udWxsKHkpIHwgaXMubnVsbChuKSlcbiAgICB3YXJuaW5nKFwiVG8gc3VtbWFyaXplIHRoZSBwb3N0ZXJpb3IsIFxuICAgICAgICAgICAgc3BlY2lmeSBkYXRhIHkgYW5kIG5cIilcbiAgYmV0YV9tZWFuIDwtIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICBhLyhhICsgYilcbiAgfVxuICBiZXRhX21vZGUgPC0gZnVuY3Rpb24oYSwgYikge1xuICAgIGlmKGEgPCAxICYgYiA8MSl7XG4gICAgICBtb2RlIDwtIFwiMCBhbmQgMVwiXG4gICAgfWVsc2UgaWYgKGEgPD0gMSAmIGIgPiAxKXtcbiAgICAgIG1vZGUgPC0gMFxuICAgIH1lbHNlIGlmIChhID4gMSAmIGIgPCAxKXtcbiAgICAgIG1vZGUgPC0gMVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgbW9kZSA8LSAoYSAtIDEpLyhhICsgYiAtIDIpXG4gICAgfVxuICB9XG4gIGJldGFfdmFyIDwtIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICBhICogYi8oKGEgKyBiKV4yICogKGEgKyBiICsgMSkpXG4gIH1cbiAgcHJpb3JfbWVhbiA8LSBiZXRhX21lYW4oYWxwaGEsIGJldGEpXG4gIHByaW9yX21vZGUgPC0gYmV0YV9tb2RlKGFscGhhLCBiZXRhKVxuICBwcmlvcl92YXIgPC0gYmV0YV92YXIoYWxwaGEsIGJldGEpXG4gIHByaW9yX3NkICA8LSBzcXJ0KHByaW9yX3ZhcilcbiAgaWYgKGlzLm51bGwoeSkgJiBpcy5udWxsKG4pKSB7XG4gICAgcmV0dXJuKGRhdGEuZnJhbWUobW9kZWwgPSBjKFwicHJpb3JcIiksIFxuICAgICAgICAgICAgICAgICAgICAgIGFscGhhID0gYWxwaGEsXG4gICAgICAgICAgICAgICAgICAgICAgYmV0YSA9IGJldGEsIFxuICAgICAgICAgICAgICAgICAgICAgIG1lYW4gPSBwcmlvcl9tZWFuLCBcbiAgICAgICAgICAgICAgICAgICAgICBtb2RlID0gcHJpb3JfbW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgPSBwcmlvcl92YXIsXG4gICAgICAgICAgICAgICAgICAgICAgc2QgPSBwcmlvcl9zZCkpXG4gIH1cbiAgZWxzZSB7XG4gICAgcG9zdF9hbHBoYSA8LSB5ICsgYWxwaGFcbiAgICBwb3N0X2JldGEgPC0gbiAtIHkgKyBiZXRhXG4gICAgcG9zdF9tZWFuIDwtIGJldGFfbWVhbihwb3N0X2FscGhhLCBwb3N0X2JldGEpXG4gICAgcG9zdF9tb2RlIDwtIGJldGFfbW9kZShwb3N0X2FscGhhLCBwb3N0X2JldGEpXG4gICAgcG9zdF92YXIgIDwtIGJldGFfdmFyKHBvc3RfYWxwaGEsIHBvc3RfYmV0YSlcbiAgICBwb3N0X3NkICAgPC0gc3FydChwb3N0X3ZhcilcbiAgICByZXR1cm4oZGF0YS5mcmFtZShtb2RlbCA9IGMoXCJwcmlvclwiLCBcInBvc3RlcmlvclwiKSwgXG4gICAgICAgICAgICAgICAgICAgICAgYWxwaGEgPSBjKGFscGhhLCBwb3N0X2FscGhhKSwgXG4gICAgICAgICAgICAgICAgICAgICAgYmV0YSA9IGMoYmV0YSwgcG9zdF9iZXRhKSwgXG4gICAgICAgICAgICAgICAgICAgICAgbWVhbiA9IGMocHJpb3JfbWVhbiwgcG9zdF9tZWFuKSwgXG4gICAgICAgICAgICAgICAgICAgICAgbW9kZSA9IGMocHJpb3JfbW9kZSwgcG9zdF9tb2RlKSwgXG4gICAgICAgICAgICAgICAgICAgICAgdmFyID0gYyhwcmlvcl92YXIsIHBvc3RfdmFyKSxcbiAgICAgICAgICAgICAgICAgICAgICBzZCA9IGMocHJpb3Jfc2QsIHBvc3Rfc2QpKSlcbiAgfVxufVxuXG5jbm5fb25pb24gPC0gZGF0YS5mcmFtZShzdHVkZW50ID0gcmVwKDE6MTAwLCBlYWNoID0gMTUpLCBxdWVzdGlvbiA9IHJlcCgxOjE1LCB0aW1lcyA9IDEwMCksIGNvcnJlY3QgPSByYmlub20obiA9IDE1KjEwMCwgc2l6ZSA9IDEsIHByb2IgPSAwLjY1KSwgeWVhciA9IHJlcCgyMDEwOjIwMjQsIGVhY2ggPSAxNSwgdGltZXMgPSAxMDApLCBpbnN0aXR1dGlvbiA9IHJlcChcIkNvbGJ5XCIsIHRpbWVzID0gMTUqMTAwKSkgIyBXZSB3aWxsIHJlcGxhY2UgdGhpcyB3aXRoIGFjdHVhbCBkYXRhIn0=
</script>
</div>
</div>
</div>
</div>
</div>
<section id="priors" class="level2">
<h2 class="anchored" data-anchor-id="priors">Priors</h2>
<p>The CNN vs.&nbsp;The Onion quiz consists of 15 questions. Each question has the same possible answers: CNN or The Onion. Before we take the quiz, think about what proportion of questions you expect someone to guess correctly on the quiz. You might think about a person’s ability to determine fact from fiction or their familiarity with CNN and The Onion.</p>
<p>Let <span class="math inline">\(\pi\)</span> be the proportion of correct answers a person guesses right in the CNN vs the Onion quiz. Keeping that number in mind, let’s explore in the table below, three different priors for <span class="math inline">\(\pi\)</span></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Optimistic</th>
<th>Undecided</th>
<th>Pessimistic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Beta(8, 3)</td>
<td>Beta(1, 1)</td>
<td>Beta(5, 10)</td>
</tr>
</tbody>
</table>
</section>
<section id="why-do-we-use-the-beta-distribution" class="level2">
<h2 class="anchored" data-anchor-id="why-do-we-use-the-beta-distribution">Why do we use the Beta distribution?</h2>
<p>The <strong>Beta distribution</strong> is commonly used as a prior for proportions because it is defined on the interval <span class="math inline">\([0, 1]\)</span>, just like any probability.</p>
<p>Its two shape parameters <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> can be interpreted as representing <strong>prior pseudo-observations</strong>:</p>
<ul>
<li><span class="math inline">\(\alpha - 1\)</span>: prior successes</li>
<li><span class="math inline">\(\beta - 1\)</span>: prior failures</li>
</ul>
<p>These shape parameters not only determine the mean of the distribution (calculated as <span class="math inline">\(\alpha / (\alpha + \beta)\)</span> but also control its skewness and informativeness.</p>
<p>Different values for <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> lead to different shapes, skewness, and central tendencides of the Beta distribution. See if you can pick out some general patterns with the relationship between <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> in the plot below:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="cnn_vs_onion_beta_binomial_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Questions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Questions
</div>
</div>
<div class="callout-body-container callout-body">
<p>What happens when:</p>
<ul>
<li><p><span class="math inline">\(\alpha &gt; \beta\)</span></p></li>
<li><p><span class="math inline">\(\alpha &lt; \beta\)</span></p></li>
<li><p><span class="math inline">\(\alpha = \beta\)</span></p></li>
</ul>
<p>What happens as <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> get larger and further apart?</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Answers">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answers
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<section id="skewness-and-symmetry" class="level3 callout-body-container callout-body">
<h3 class="anchored" data-anchor-id="skewness-and-symmetry">Skewness and Symmetry</h3>
<ul>
<li><p>If <span class="math inline">\(\alpha &lt; \beta\)</span>, the distribution is <strong>right-skewed</strong>, suggesting a belief that the proportion is likely to be low (e.g., <code>Beta(1, 5)</code>).</p></li>
<li><p>If <span class="math inline">\(\alpha &gt; \beta\)</span>, the distribution is <strong>left-skewed</strong>, placing more weight on higher proportions (e.g., <code>Beta(5, 1)</code>).</p></li>
<li><p>If <span class="math inline">\(\alpha = \beta\)</span>, the distribution is <strong>symmetric</strong> and centered at 0.5 (e.g., <code>Beta(5, 5)</code>).</p></li>
</ul>
<p>The further apart <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> are, the more skewed the distribution becomes. Symmetric models like <code>Beta(20, 20)</code> or <code>Beta(5, 5)</code> show increasingly narrow concentration around the mean as the total number of pseudo-observations <span class="math inline">\(\alpha + \beta\)</span> increases.</p>
</section>
</div>
</div>
<section id="plotting-the-priors" class="level3">
<h3 class="anchored" data-anchor-id="plotting-the-priors">Plotting the Priors</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="cnn_vs_onion_beta_binomial_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="1248"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="where-does-your-prior-fall" class="level3">
<h3 class="anchored" data-anchor-id="where-does-your-prior-fall">Where does your prior fall?</h3>
<p>Returning to your own prior, replace <code>my_alpha</code> and <code>my_beta</code> with the <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span> from your prior distribution.</p>
<div class="cell">
<div>
<div id="webr-2" class="exercise-cell">

</div>
<script type="webr-2-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiXG5teV9wcmlvciA8LSBwbG90X2JldGEoYWxwaGEgPSBteV9hbHBoYSwgYmV0YSA9IG15X2JldGEpICtcbiAgbGFicyh0aXRsZSA9IFwiTXkgUHJlZGljdGlvblwiKVxuXG5teV9wcmlvciJ9
</script>
</div>
</div>
<p>Looking at the graph of your prior, which person is your prior most similar to: Optimistic, Undecided or Pessimistic?</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Vocabulary
</div>
</div>
<div class="callout-body-container callout-body">
<p>We often describe priors in terms of how much information they give about the unknown variable. Priors are often described as:</p>
<ul>
<li><p><strong>Informative prior:</strong> An informative prior reflects specific information about the unknown variable with high certainty (i.e.&nbsp;low variability).</p></li>
<li><p><strong>Vague (diffuse) prior:</strong> A vague or diffuse prior reflects little specific information about the unknown variable. A flat prior, which assigns equal prior plausibility to all possible values of the variable, is a special case.</p></li>
</ul>
</div>
</div>
<p>Let’s take a look at a highly informative prior from someone who is <em>very optimistic</em> about individuals getting answers correct.</p>
<div class="cell" data-layout-align="center">
<div>
<div id="webr-3" class="exercise-cell">

</div>
<script type="webr-3-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiXG5wbG90X2JldGEoYWxwaGEgPSAxNDAsIGJldGEgPSAxMCkgICtcbiAgbGFicyh0aXRsZSA9IFwiVmVyeSBPcHRpbWlzdGljXCIpIn0=
</script>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflection:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Referring to your Reflection handout, write down your answers to the following questions:</p>
<ul>
<li>What do you notice about the very optimistic prior. Is it more informative? What do you notice about the plot?</li>
<li>How would you classify your prior? Is it informative or vague? Why?</li>
</ul>
</div>
</div>
</section>
</section>
<section id="updating-with-data" class="level2">
<h2 class="anchored" data-anchor-id="updating-with-data">Updating with data</h2>
<ul>
<li><p>Based on observed data, we will update our posterior understanding using the four prior models and our own prior model. We will do this with our own score, our neighbor’s scores, and the class or dataset score.</p></li>
<li><p>Next, we calculate the summary statistics for the prior and posterior for all four priors using the function <code>summarize_beta_binomial</code>:</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
summarize_beta_binomial
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><code>summarize_beta_binomial(alpha, beta, y = NULL, n = NULL)</code> function summarizes the mean, mode, and variance of the prior and posterior Beta models of <span class="math inline">\(\pi\)</span>.</p></li>
<li><p>Arguments:</p>
<ul>
<li><code>alpha, beta</code>: positive shape parameters of the prior Beta model</li>
<li><code>y</code>: number of successes</li>
<li><code>n</code>: number of trials</li>
</ul></li>
</ul>
</div>
</div>
<ul>
<li><p>Next, we plot the prior, likelihood, and the posterior for all four people.</p></li>
<li><p>Lastly, we examine the effect of different priors on the posterior.</p></li>
</ul>
</section>
<section id="take-the-quiz" class="level2">
<h2 class="anchored" data-anchor-id="take-the-quiz">Take the quiz</h2>
<p>Let’s take the quiz and add our data to the dataset of trials and successes for a person taking this quiz.</p>
<p>Each of you will take a quiz consisting of 15 questions. Each question has the same possible answers: CNN or The Onion. You can take the quiz through our <a href="https://forms.gle/eVvFHZQwvtsBYa9r9">google form</a>:</p>
<iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeNADV2SfZbCNZRcwZ_2oaP1eBh8rgXKV_WKxXyQR-5QGEBlA/viewform?embedded=true" width="640" height="640" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>
<p>Note down how many you get correct. We will compare this with our neighbors and pool data from the class.</p>
</section>
<section id="adding-data" class="level2">
<h2 class="anchored" data-anchor-id="adding-data">Adding data</h2>
<p>Choose the priors that interest you and we will update them as follows below:</p>
<ol type="1">
<li>Add your quiz data</li>
</ol>
<p>Let’s update the prior model with some data. Add the number you got correct and enter your prior from before. Your n column should be 15 to reflect that you answered 15 questions.</p>
<ol start="2" type="1">
<li>Compare with your classmates</li>
</ol>
<ul>
<li><p>Let’s now update your prior with your classmate to your <strong>left’s</strong> score. Your <code>n</code> column should now be 30 to reflect the two quizzes.</p></li>
<li><p>Let’s now update your prior with your classmate to your <strong>right’s</strong> score. Your <code>n</code> column should now be 45 to reflect the three quizzes.</p></li>
</ul>
<ol start="3" type="1">
<li>Finally, we will compare to the full class data. This will require tallying all the scores from all students.</li>
</ol>
</section>
<section id="calculating-the-summary-statistics-and-plotting-the-distribution" class="level2">
<h2 class="anchored" data-anchor-id="calculating-the-summary-statistics-and-plotting-the-distribution">Calculating the summary statistics and plotting the distribution</h2>
<div class="cell">
<div>
<div id="webr-4" class="exercise-cell">

</div>
<script type="webr-4-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoibnVtX2NvcnJlY3QgPC0gIyBBZGQgeW91ciBjb2RlIGhlcmVcbnRvdGFsX3F1ZXN0aW9ucyA8LSAjIEFkZCB5b3VyIGNvZGUgaGVyZSJ9
</script>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The Optimist
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div>
<div id="webr-5" class="exercise-cell">

</div>
<script type="webr-5-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSAxNCwgYmV0YSA9IDEsIHkgPSBudW1fY29ycmVjdCwgbiA9IHRvdGFsX3F1ZXN0aW9ucylcblxucGxvdF9iZXRhX2Jpbm9taWFsKGFscGhhID0gMTQsIGJldGEgPSAxLCB5ID0gbnVtX2NvcnJlY3QsIG4gPSB0b3RhbF9xdWVzdGlvbnMpIn0=
</script>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Undecided
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div>
<div id="webr-6" class="exercise-cell">

</div>
<script type="webr-6-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSAxLCBiZXRhID0gMSwgeSA9IG51bV9jb3JyZWN0LCBuID0gdG90YWxfcXVlc3Rpb25zKVxuXG5wbG90X2JldGFfYmlub21pYWwoYWxwaGEgPSAxLCBiZXRhID0gMSwgeSA9IG51bV9jb3JyZWN0LCBuID0gdG90YWxfcXVlc3Rpb25zKSJ9
</script>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The Pessimist
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div>
<div id="webr-7" class="exercise-cell">

</div>
<script type="webr-7-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSA0LCBiZXRhID0gMTEsIHkgPSBudW1fY29ycmVjdCwgbiA9IHRvdGFsX3F1ZXN0aW9ucylcblxucGxvdF9iZXRhX2Jpbm9taWFsKGFscGhhID0gNCwgYmV0YSA9IDExLCB5ID0gbnVtX2NvcnJlY3QsIG4gPSB0b3RhbF9xdWVzdGlvbnMpIn0=
</script>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Very Optimistic
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div>
<div id="webr-8" class="exercise-cell">

</div>
<script type="webr-8-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSB5b3VyX2FscGhhLCBiZXRhID0geW91cl9iZXRhLCB5ID0gbnVtX2NvcnJlY3QsIG4gPSB0b3RhbF9xdWVzdGlvbnMpXG5cbnBsb3RfYmV0YV9iaW5vbWlhbChhbHBoYSA9IDE0MCwgYmV0YSA9IDEwLCB5ID0gbnVtX2NvcnJlY3QsIG4gPSB0b3RhbF9xdWVzdGlvbnMpIn0=
</script>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Your prior
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div>
<div id="webr-9" class="exercise-cell">

</div>
<script type="webr-9-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSB5b3VyX2FscGhhLCBiZXRhID0geW91cl9iZXRhLCB5ID0gbnVtX2NvcnJlY3QsIG4gPSB0b3RhbF9xdWVzdGlvbnMpXG5cbnBsb3RfYmV0YV9iaW5vbWlhbChhbHBoYSA9IHlvdXJfYWxwaGEsIGJldGEgPSB5b3VyX2JldGEsIHkgPSBudW1fY29ycmVjdCwgbiA9IHRvdGFsX3F1ZXN0aW9ucykifQ==
</script>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflection
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>How does observing more data affect the shape of the posterior?</p></li>
<li><p>What happens to the posterior mean as you observe more correct or incorrect outcomes?</p></li>
<li><p>In what ways does the posterior reflect a compromise between prior belief and observed data?</p></li>
</ul>
</div>
</div>
<section id="compare-to-your-class-or-to-our-dataset" class="level3">
<h3 class="anchored" data-anchor-id="compare-to-your-class-or-to-our-dataset">Compare to your class or to our dataset</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  student question correct year institution
1       1        1       1 2010       Colby
2       1        2       1 2010       Colby
3       1        3       1 2010       Colby
4       1        4       0 2010       Colby
5       1        5       1 2010       Colby
6       1        6       1 2010       Colby</code></pre>
</div>
</div>
<p>Let’s take a look at the student results from 2010.</p>
<div class="cell">
<div>
<div id="webr-10" class="exercise-cell">

</div>
<script type="webr-10-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoiXG5jbm5fb25pb25fMjAxMCA8LSBjbm5fb25pb24gfD5cbiAgZmlsdGVyKHllYXIgPT0gMjAxMCxcbiAgICAgICAgIHN0dWRlbnQgJWluJSBjKDE6MTApKVxuXG5jb3VudChjbm5fb25pb25fMjAxMCwgY29ycmVjdCkifQ==
</script>
</div>
</div>
</section>
<section id="the-optimist-1" class="level3">
<h3 class="anchored" data-anchor-id="the-optimist-1">The Optimist</h3>
<div class="cell">
<div>
<div id="webr-11" class="exercise-cell">

</div>
<script type="webr-11-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSA4LCBiZXRhID0gMywgeSA9IDUwLCBuID0gMTUwKSJ9
</script>
</div>
</div>
<div class="cell" data-layout-align="center">
<div>
<div id="webr-12" class="exercise-cell">

</div>
<script type="webr-12-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoicGxvdF9iZXRhX2Jpbm9taWFsKGFscGhhID0gOCwgYmV0YSA9IDMsIHkgPSA1MCwgbiA9IDE1MCkifQ==
</script>
</div>
</div>
</section>
<section id="undecided-1" class="level3">
<h3 class="anchored" data-anchor-id="undecided-1">Undecided</h3>
<div class="cell">
<div>
<div id="webr-13" class="exercise-cell">

</div>
<script type="webr-13-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSAxLCBiZXRhID0gMSwgeSA9IDUwLCBuID0gMTUwKSJ9
</script>
</div>
</div>
<div class="cell" data-layout-align="center">
<div>
<div id="webr-14" class="exercise-cell">

</div>
<script type="webr-14-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoicGxvdF9iZXRhX2Jpbm9taWFsKGFscGhhID0gMSwgYmV0YSA9IDEsIHkgPSA1MCwgbiA9IDE1MCkifQ==
</script>
</div>
</div>
</section>
<section id="the-pessimist-1" class="level3">
<h3 class="anchored" data-anchor-id="the-pessimist-1">The Pessimist</h3>
<div class="cell">
<div>
<div id="webr-15" class="exercise-cell">

</div>
<script type="webr-15-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSA0LCBiZXRhID0gMTEsIHkgPSA1MCwgbiA9IDE1MCkifQ==
</script>
</div>
</div>
<div class="cell" data-layout-align="center">
<div>
<div id="webr-16" class="exercise-cell">

</div>
<script type="webr-16-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoicGxvdF9iZXRhX2Jpbm9taWFsKGFscGhhID0gNCwgYmV0YSA9IDExLCB5ID0gNTAsIG4gPSAxNTApIn0=
</script>
</div>
</div>
</section>
<section id="very-optimistic-1" class="level3">
<h3 class="anchored" data-anchor-id="very-optimistic-1">Very Optimistic</h3>
<div class="cell">
<div>
<div id="webr-17" class="exercise-cell">

</div>
<script type="webr-17-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoic3VtbWFyaXplX2JldGFfYmlub21pYWwoYWxwaGEgPSAxNDAsIGJldGEgPSAxMCwgeSA9IDUwLCBuID0gMTUwKSJ9
</script>
</div>
</div>
<div class="cell" data-layout-align="center">
<div>
<div id="webr-18" class="exercise-cell">

</div>
<script type="webr-18-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoicGxvdF9iZXRhX2Jpbm9taWFsKGFscGhhID0gMTQwLCBiZXRhID0gMTAsIHkgPSA1MCwgbiA9IDE1MCkifQ==
</script>
</div>
</div>
</section>
</section>
<section id="comparison-of-the-priors" class="level2">
<h2 class="anchored" data-anchor-id="comparison-of-the-priors">Comparison of the priors</h2>
<div class="cell" data-layout-align="center">
<div>
<div id="webr-19" class="exercise-cell">

</div>
<script type="webr-19-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoibGlicmFyeShncmlkRXh0cmEpXG5cbm9wdGltaXN0IDwtIHBsb3RfYmV0YV9iaW5vbWlhbCg4LCAzLCB5ID0gNTAsIG4gPSAxNTApICtcbiAgbGFicyh0aXRsZSA9IFwiT3B0aW1pc3RpY1wiKVxuXG51bmRlY2lkZWQgPC0gcGxvdF9iZXRhX2Jpbm9taWFsKDEsIDEsIHkgPSA1MCwgbiA9IDE1MCkgK1xuICBsYWJzKHRpdGxlID0gXCJVbmRlY2lkZWRcIilcblxucGVzc2ltaXN0IDwtIHBsb3RfYmV0YV9iaW5vbWlhbCg0LCAxMSwgeSA9IDUwLCBuID0gMTUwKSArXG4gIGxhYnModGl0bGUgPSBcIlBlc3NpbWlzdGljXCIpXG5cbnZlcnlfb3B0aW1pc3RpYyA8LSBwbG90X2JldGFfYmlub21pYWwoMTQwLCAxMCwgeSA9IDUwLCBuID0gMTUwKSArXG4gIGxhYnModGl0bGUgPSBcIlZlcnkgT3B0aW1pc3RpY1wiKVxuXG5ncmlkRXh0cmE6OmdyaWQuYXJyYW5nZShvcHRpbWlzdCwgdW5kZWNpZGVkLCBwZXNzaW1pc3QsIHZlcnlfb3B0aW1pc3RpYywgbmNvbCA9IDIpIn0=
</script>
</div>
</div>
<p>Fill in the gaps to add your alpha and beta shape parameters with your guess:</p>
<div class="cell">
<div>
<div id="webr-20" class="exercise-cell">

</div>
<script type="webr-20-contents">
eyJhdHRyIjp7ImV2YWwiOnRydWUsImVkaXQiOnRydWV9LCJjb2RlIjoibGlicmFyeShncmlkRXh0cmEpXG5cbnlvdXJfcGxvdCA8LSBwbG90X2JldGFfYmlub21pYWwoYWxwaGEgPSB5b3VyX2FscGhhLCBiZXRhID0geW91cl9iZXRhLCB5ID0gNTAsIG4gPSAxNTApICtcbiAgbGFicyh0aXRsZSA9IFwiWW91ciBQcmlvclwiKVxuXG5ncmlkRXh0cmE6OmdyaWQuYXJyYW5nZShvcHRpbWlzdCwgdW5kZWNpZGVkLCBwZXNzaW1pc3QsIHZlcnlfb3B0aW1pc3RpYywgeW91cl9wbG90LCBuY29sID0gMikifQ==
</script>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflection
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Inspecting the updated posteriors, how did the posteriors change or differ based on the respective priors?</p></li>
<li><p>What happened when you had a more informative prior, e.g.&nbsp;The Very Optimistic?</p></li>
<li><p>Look back at the summary statistics that you calculated for the distributions. Choose one of the posteriors “Optimistic, Pessimistic, Undecided, Very Optimistic” and compare it with your own. What do each of the summary statistics (mean, mode, standard deviation) tell you about the probability of success after seeing the data?</p></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Recap
</div>
</div>
<div class="callout-body-container callout-body">
<p>In this activity, you:</p>
<ul>
<li><p>Made a prediction about how well you’d do on a quiz and turned that into a prior model</p></li>
<li><p>Learned about different types of priors: optimistic, undecided, and pessimistic</p></li>
<li><p>Updated your prior using data from the quiz to get a posterior model</p></li>
<li><p>Compared how different priors affect the posterior, even when we see the same data</p></li>
<li><p>Practiced reading and interpreting plots of priors and posteriors</p></li>
<li><p>Calculated key summary statistics like the mean, mode, and standard deviation</p></li>
</ul>
</div>
</div>
<p>This exercise shows how Bayesian thinking helps us combine what we already believe with new evidence to make better, more informed decisions. And sometimes, it reminds us that even when we think we’re great at telling real news from fake news, the data might say otherwise!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Reflection
</div>
</div>
<div class="callout-body-container callout-body">
<p>Think about your prior prediction and how it compared to the data.</p>
<ul>
<li><p>How similar or different was your prior to the actual results?</p></li>
<li><p>Did updating your beliefs with data change your thinking? In what way?</p></li>
<li><p>If you had chosen a different prior (e.g., more vague or more informative), how would your posterior have changed?</p></li>
<li><p>What does this activity show about the role of prior knowledge or assumptions in data analysis?</p></li>
</ul>
<p>Take a few minutes to jot down your thoughts before sharing your ideas with a partner or group.</p>
</div>
</div>
<script type="webr-data">
eyJwYWNrYWdlcyI6eyJyZXBvcyI6W10sInBrZ3MiOlsiZXZhbHVhdGUiLCJrbml0ciIsImh0bWx0b29scyJdfSwib3B0aW9ucyI6eyJiYXNlVXJsIjoiaHR0cHM6Ly93ZWJyLnItd2FzbS5vcmcvdjAuNC4yLyJ9LCJyZW5kZXJfZGYiOiJkZWZhdWx0In0=
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8yMDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMjAiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzIwID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMjAtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0yMC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8yMCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMjAsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0yMCIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xOTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTkiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE5ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTktY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xOS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xOSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTksIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0xOSIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xODtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTgiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE4ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTgtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xOC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xOCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTgsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0xOCIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xNztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTciLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE3ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTctY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xNy1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xNyA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTcsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0xNyIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xNjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTYiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE2ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTYtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xNi1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xNiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTYsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0xNiIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xNTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTUiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE1ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTUtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xNS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xNSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTUsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0xNSIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xNDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTQiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE0ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTQtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xNC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xNCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTQsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0xNCIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTMiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzEzID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTMtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xMy1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xMyA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTMsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0xMyIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTIiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzEyID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTItY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xMi1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xMiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTIsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0xMiIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTEiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzExID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTEtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xMS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xMSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTEsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0xMSIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xMDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMTAiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzEwID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTAtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xMC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xMCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTAsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0xMCIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV85O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC05IiwiaW5saW5lIjpmYWxzZX0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl85ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItOS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTktY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfOSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfOSwge30pO1xuIiwiY2VsbE5hbWUiOiJ3ZWJyLTkiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfODtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtOCIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfOCA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTgtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici04LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzggPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzgsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici04IiwiaW5saW5lIjpmYWxzZX0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzc7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTciLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzcgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici03LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItNy1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV83ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl83LCB7fSk7XG4iLCJjZWxsTmFtZSI6IndlYnItNyIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV82O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC02IiwiaW5saW5lIjpmYWxzZX0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl82ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItNi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTYtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfNiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfNiwge30pO1xuIiwiY2VsbE5hbWUiOiJ3ZWJyLTYiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfNTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtNSIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNSA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTUtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici01LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzUgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzUsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici01IiwiaW5saW5lIjpmYWxzZX0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzQ7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTQiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzQgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici00LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItNC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV80ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl80LCB7fSk7XG4iLCJjZWxsTmFtZSI6IndlYnItNCIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zO1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIiwiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0zIiwiaW5saW5lIjpmYWxzZX0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl8zID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTMtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfMyA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMywge30pO1xuIiwiY2VsbE5hbWUiOiJ3ZWJyLTMiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiIsImNlbGxOYW1lIjoid2Vici13aWRnZXQtMiIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMiA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTItY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0yLWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzIgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzIsIHt9KTtcbiIsImNlbGxOYW1lIjoid2Vici0yIiwiaW5saW5lIjpmYWxzZX0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzE7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4iLCJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTEiLCJpbmxpbmUiOmZhbHNlfSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzEgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItMS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xLCB7fSk7XG4iLCJjZWxsTmFtZSI6IndlYnItMSIsImlubGluZSI6ZmFsc2V9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoid2ViUk9qcyA9IHtcbiAgY29uc3QgeyBXZWJSLCBDaGFubmVsVHlwZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZS5XZWJSO1xuICBjb25zdCB7XG4gICAgV2ViUkV2YWx1YXRvcixcbiAgICBXZWJSRW52aXJvbm1lbnRNYW5hZ2VyLFxuICAgIHNldHVwUixcbiAgICBiNjREZWNvZGUsXG4gICAgY29sbGFwc2VQYXRoXG4gIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuXG4gIGNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXhlcmNpc2UtbG9hZGluZy1zdGF0dXNcIik7XG4gIGNvbnN0IGluZGljYXRvckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXhlcmNpc2UtbG9hZGluZy1pbmRpY2F0b3JcIik7XG4gIGluZGljYXRvckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiZC1ub25lXCIpO1xuXG4gIGxldCBzdGF0dXNUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICBzdGF0dXNUZXh0LmNsYXNzTGlzdCA9IFwiZXhlcmNpc2UtbG9hZGluZy1kZXRhaWxzXCI7XG4gIHN0YXR1c1RleHQgPSBzdGF0dXNDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHVzVGV4dCk7XG4gIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgSW5pdGlhbGlzZWA7XG5cbiAgLy8gSG9pc3QgaW5kaWNhdG9yIG91dCBmcm9tIGZpbmFsIHNsaWRlIHdoZW4gcnVubmluZyB1bmRlciByZXZlYWxcbiAgY29uc3QgcmV2ZWFsU3RhdHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXZlYWwgLmV4ZXJjaXNlLWxvYWRpbmctaW5kaWNhdG9yXCIpO1xuICBpZiAocmV2ZWFsU3RhdHVzKSB7XG4gICAgcmV2ZWFsU3RhdHVzLnJlbW92ZSgpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmV2ZWFsID4gLnNsaWRlc1wiKS5hcHBlbmRDaGlsZChyZXZlYWxTdGF0dXMpO1xuICB9XG5cbiAgLy8gTWFrZSBhbnkgcmV2ZWFsIHNsaWRlcyB3aXRoIGxpdmUgY2VsbHMgc2Nyb2xsYWJsZVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJldmVhbCAuZXhlcmNpc2UtY2VsbFwiKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGVsLmNsb3Nlc3QoJ3NlY3Rpb24uc2xpZGUnKS5jbGFzc0xpc3QuYWRkKFwic2Nyb2xsYWJsZVwiKTtcbiAgfSlcblxuICAvLyB3ZWJSIHN1cHBsZW1lbnRhbCBkYXRhIGFuZCBvcHRpb25zXG4gIGNvbnN0IGRhdGFDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItZGF0YVxcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGI2NERlY29kZShkYXRhQ29udGVudCkpO1xuXG4gIC8vIEdyYWIgbGlzdCBvZiByZXNvdXJjZXMgdG8gYmUgZG93bmxvYWRlZFxuICBjb25zdCBmaWxlc0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwidmZzLWZpbGVcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBmaWxlcyA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKGZpbGVzQ29udGVudCkpO1xuXG4gIC8vIFVzZSBQb3N0TWVzc2FnZSBjaGFubmVsIGZvciBhc3luYyBjb21tdW5pY2F0aW9uXG4gIC8vIFdlIGRvIG5vdCBleHBlY3QgdG8gdGFrZSBuZXN0ZWQgcHJvbXB0IGlucHV0IGluIFF1YXJ0byBMaXZlIGNlbGxzXG4gIGRhdGEub3B0aW9ucy5jaGFubmVsVHlwZSA9IENoYW5uZWxUeXBlLlBvc3RNZXNzYWdlO1xuXG4gIC8vIEluaXRpYWxpc2Ugd2ViUiBhbmQgc2V0dXAgZm9yIFIgY29kZSBldmFsdWF0aW9uXG4gIGxldCB3ZWJSUHJvbWlzZSA9IChhc3luYyAod2ViUikgPT4ge1xuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgd2ViUmA7XG4gICAgYXdhaXQgd2ViUi5pbml0KCk7XG5cbiAgICAvLyBJbnN0YWxsIHByb3ZpZGVkIGxpc3Qgb2YgcGFja2FnZXNcbiAgICAvLyBFbnN1cmUgd2ViUiBkZWZhdWx0IHJlcG8gaXMgaW5jbHVkZWRcbiAgICBkYXRhLnBhY2thZ2VzLnJlcG9zLnB1c2goXCJodHRwczovL3JlcG8uci13YXNtLm9yZ1wiKVxuICAgIGF3YWl0IGRhdGEucGFja2FnZXMucGtncy5tYXAoKHBrZykgPT4gKCkgPT4ge1xuICAgICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyBwYWNrYWdlOiAke3BrZ31gO1xuICAgICAgcmV0dXJuIHdlYlIuZXZhbFJWb2lkKGBcbiAgICAgICAgd2Vicjo6aW5zdGFsbChwa2csIHJlcG9zID0gcmVwb3MpXG4gICAgICAgIGxpYnJhcnkocGtnLCBjaGFyYWN0ZXIub25seSA9IFRSVUUpXG4gICAgICBgLCB7IGVudjoge1xuICAgICAgICBwa2c6IHBrZyxcbiAgICAgICAgcmVwb3M6IGRhdGEucGFja2FnZXMucmVwb3MsXG4gICAgICB9fSk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAvLyBEb3dubG9hZCBhbmQgaW5zdGFsbCByZXNvdXJjZXNcbiAgICBhd2FpdCBmaWxlcy5tYXAoKGZpbGUpID0+IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSBmaWxlLnN1YnN0cmluZyhmaWxlLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgcmVzb3VyY2U6ICR7bmFtZX1gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaWxlKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBkb3dubG9hZCBcXGAke2ZpbGV9XFxgLiBFcnJvciAke3Jlc3BvbnNlLnN0YXR1c306IFwiJHtyZXNwb25zZS5zdGF0dXNUZXh0fVwiLmApO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG5cbiAgICAgIC8vIFN0b3JlIFVSTHMgaW4gdGhlIGN3ZCB3aXRob3V0IGFueSBzdWJkaXJlY3Rvcnkgc3RydWN0dXJlXG4gICAgICBpZiAoZmlsZS5pbmNsdWRlcyhcIjovL1wiKSkge1xuICAgICAgICBmaWxlID0gbmFtZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29sbGFwc2UgaGlnaGVyIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgIGZpbGUgPSBjb2xsYXBzZVBhdGgoZmlsZSk7XG5cbiAgICAgIC8vIENyZWF0ZSBkaXJlY3RvcnkgdHJlZSwgaWdub3JpbmcgXCJkaXJlY3RvcnkgZXhpc3RzXCIgVkZTIGVycm9yc1xuICAgICAgY29uc3QgcGFydHMgPSBmaWxlLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpO1xuICAgICAgbGV0IHBhdGggPSAnJztcbiAgICAgIHdoaWxlIChwYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhdGggKz0gcGFydHMuc2hpZnQoKSArICcvJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB3ZWJSLkZTLm1rZGlyKHBhdGgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaWYgKCFlLm1lc3NhZ2UuaW5jbHVkZXMoXCJGUyBlcnJvclwiKSkge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV3JpdGUgdGhpcyBmaWxlIHRvIHRoZSBWRlNcbiAgICAgIHJldHVybiBhd2FpdCB3ZWJSLkZTLndyaXRlRmlsZShmaWxlLCBuZXcgVWludDhBcnJheShkYXRhKSk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYEluc3RhbGxpbmcgd2ViUiBzaGltc2A7XG4gICAgYXdhaXQgd2ViUi5ldmFsUlZvaWQoYHdlYnI6OnNoaW1faW5zdGFsbCgpYCk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYFdlYlIgZW52aXJvbm1lbnQgc2V0dXBgO1xuICAgIGF3YWl0IHNldHVwUih3ZWJSLCBkYXRhKTtcblxuICAgIHN0YXR1c1RleHQucmVtb3ZlKCk7XG4gICAgaWYgKHN0YXR1c0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPT0gMCkge1xuICAgICAgc3RhdHVzQ29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlKCk7XG4gICAgfVxuICAgIHJldHVybiB3ZWJSO1xuICB9KShuZXcgV2ViUihkYXRhLm9wdGlvbnMpKTtcblxuICAvLyBLZWVwIHRyYWNrIG9mIGluaXRpYWwgT0pTIGJsb2NrIHJlbmRlclxuICBjb25zdCByZW5kZXJlZE9qcyA9IHt9O1xuXG4gIGNvbnN0IHByb2Nlc3MgPSBhc3luYyAoY29udGV4dCwgaW5wdXRzKSA9PiB7XG4gICAgY29uc3Qgd2ViUiA9IGF3YWl0IHdlYlJQcm9taXNlO1xuICAgIGNvbnN0IGV2YWx1YXRvciA9IG5ldyBXZWJSRXZhbHVhdG9yKHdlYlIsIGNvbnRleHQpXG4gICAgYXdhaXQgZXZhbHVhdG9yLnByb2Nlc3MoaW5wdXRzKTtcbiAgICByZXR1cm4gZXZhbHVhdG9yLmNvbnRhaW5lcjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcHJvY2VzcyxcbiAgICB3ZWJSUHJvbWlzZSxcbiAgICByZW5kZXJlZE9qcyxcbiAgfTtcbn1cbiIsImNlbGxOYW1lIjoid2Vici1wcmVsdWRlIiwiaW5saW5lIjpmYWxzZX1dfQ==
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script>
</section>
</section>

</main>
<!-- /main column -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../..";
window._ojs.paths.runtimeToRoot = "../../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>